---
title: Êó∂Èó¥ÊóÖË°å
tags:
   - react
---


React ÁöÑ‚ÄúÊó∂Èó¥ÊóÖË°åÔºàTime TravelÔºâ‚ÄùÊòØÊåáÂú®Â∫îÁî®ÁöÑÂºÄÂèëÊàñË∞ÉËØïËøáÁ®ã‰∏≠Ôºå**ËÉΩÂ§üËøΩË∏™Âπ∂ÂõûÈÄÄÂ∫îÁî®Áä∂ÊÄÅÂà∞ÂÖàÂâçÁöÑÊüê‰∏Ä‰∏™ÁÇπ**ÔºåÂ∞±ÂÉèÂèØ‰ª•Âú®Êó∂Èó¥ËΩ¥‰∏ä‚ÄúÊóÖË°å‚Äù‰∏ÄÊ†∑„ÄÇ

Ëøô‰∏™Ê¶ÇÂøµÁöÑÊ†∏ÂøÉÂú®‰∫éÔºö

> **Â∞ÜÂ∫îÁî®ÁöÑÁä∂ÊÄÅÂèòÂåñÁúã‰Ωú‰∏ÄÁ≥ªÂàóÂèØ‰ª•ÂõûÊîæÁöÑÂéÜÂè≤ËÆ∞ÂΩïÔºå‰ªéËÄåÂèØ‰ª•ÈöèÊó∂Ë∑≥ËΩ¨Âà∞‰ªªÊÑè‰∏Ä‰∏™Áä∂ÊÄÅ„ÄÇ**

---

## üß† ËÉåÂêéÁöÑÊÄùÊÉ≥

React Êú¨Ë∫´ÊòØ‰∏Ä‰∏™ UI Â∫ìÔºåÂπ∂‰∏çÂÖ∑Â§áÊó∂Èó¥ÊóÖË°åÁöÑËÉΩÂäõ„ÄÇ‰ΩÜÁªìÂêà **Áä∂ÊÄÅÁÆ°ÁêÜÂ∑•ÂÖ∑**ÔºàÂ¶Ç ReduxÔºâÂêéÔºåÂèØ‰ª•ÂÅöÂà∞Áä∂ÊÄÅÁöÑÂèØÈ¢ÑÊµãÊÄßÂíåÂéÜÂè≤ËÆ∞ÂΩïÁöÑ‰øùÂ≠òÔºå‰ªéËÄåÂÆûÁé∞Êó∂Èó¥ÊóÖË°åË∞ÉËØï„ÄÇ

---

## ‚è≥ ‰∏æ‰∏™‰æãÂ≠ê

ÂÅáËÆæ‰Ω†Êúâ‰∏Ä‰∏™ Redux ÁÆ°ÁêÜÁöÑËÆ°Êï∞Âô®Ôºö

```ts
{
  count: 0
}
```

ÊØèÊ¨°ÁÇπÂáªÊåâÈíÆÔºå`count` Â¢ûÂä† 1„ÄÇÁä∂ÊÄÅ‰ºö‰æùÊ¨°Âèò‰∏∫Ôºö

```
0 ‚Üí 1 ‚Üí 2 ‚Üí 3
```

Â¶ÇÊûú‰Ω†ËÆ∞ÂΩï‰∫ÜÊØè‰∏Ä‰∏™Áä∂ÊÄÅÔºåÂ∞±ÂèØ‰ª•Ôºö

* ÂõûÈÄÄÂà∞ `count = 1` ÁöÑÁä∂ÊÄÅ
* ÂâçËøõÂà∞ `count = 3`
* ÈáçÊîæÊï¥‰∏™Áä∂ÊÄÅÂèòÂåñËøáÁ®ã

ËøôÂ∞±ÊòØÊó∂Èó¥ÊóÖË°åË∞ÉËØï„ÄÇ

---

## ‚öôÔ∏è ÂÆûÁé∞ÊñπÂºèÔºà‰ª• Redux ‰∏∫‰æãÔºâ

1. **ËÆ∞ÂΩïÊØè‰∏ÄÊ¨° dispatch ÂêéÁöÑ state**
2. ‰øùÂ≠òËøô‰∫õ state Âà∞‰∏Ä‰∏™ history Êï∞ÁªÑ‰∏≠
3. Êèê‰æõÂâçËøõ / ÂêéÈÄÄÁöÑÊñπÊ≥ïÔºàÂ¶Ç `undo`, `redo`Ôºâ
4. Áî®Êüê‰∏™ UI Êéß‰ª∂ÔºàÂ¶Ç DevToolsÔºâÊù•Êìç‰ΩúÁä∂ÊÄÅÂéÜÂè≤

‰æãÂ¶ÇÔºö

```ts
const history = [
  { count: 0 },
  { count: 1 },
  { count: 2 },
  { count: 3 }
];
```

ÂΩì‰Ω†ÁÇπÂáª Redux DevTools ‰∏äÁöÑ‚ÄúË∑≥ËΩ¨Âà∞Á¨¨ 2 Ê≠•‚ÄùÔºåÂ∞±ÂèØ‰ª•ËÆ© UI Ëá™Âä®ÂõûÂà∞ `count = 2` ÁöÑÁïåÈù¢„ÄÇ

---

## üöÄ Êó∂Èó¥ÊóÖË°åÁöÑÊÑè‰πâ

* **Ë∞ÉËØïÂèòÂæóÁÆÄÂçï**ÔºöÂèØËßÜÂåñÊØè‰∏ÄÊ≠•Áä∂ÊÄÅÂèòÂåñÔºåÊéíÊü• bug Â¶ÇÂêå‚ÄúÂÄíÂ∏¶ËßÜÈ¢ë‚Äù
* **Áä∂ÊÄÅÂèØËøΩÊ∫Ø**ÔºöÁü•ÈÅìÊØèÊ¨° UI Êõ¥Êñ∞ÊòØÁî±‰ªÄ‰πà action Ëß¶ÂèëÁöÑ
* **ÂºÄÂèë‰ΩìÈ™åÊèêÂçá**ÔºöËá™Âä®ÁÉ≠ÈáçËΩΩ + Êó∂Èó¥ÊóÖË°åÔºåËÆ©ÂâçÁ´ØÂºÄÂèë‰ΩìÈ™åÂ™≤ÁæéÂêéÁ´ØÊñ≠ÁÇπË∞ÉËØï

---

## üß© Â∞èÁªì

| ÁâπÊÄß | ÊèèËø∞                  |
| -- | ------------------- |
| Êú¨Ë¥® | Áä∂ÊÄÅÁöÑÂéÜÂè≤ËÆ∞ÂΩï‰∏éË∑≥ËΩ¨          |
| Â∫îÁî® | Redux DevTools„ÄÅÁä∂ÊÄÅË∞ÉËØï |
| ‰ºòÂäø | ÂèØÂõûÊîæ„ÄÅË∞ÉËØïÊñπ‰æø            |
| Ë¶ÅÊ±Ç | Áä∂ÊÄÅÊòØÂèØÈ¢ÑÊµã„ÄÅÂèØÂ∫èÂàóÂåñÁöÑÔºàPureÔºâ  |

---
Êí§ÈîÄ / ÈáçÂÅöÁ≥ªÁªüÔºàUndo / Redo SystemÔºâÊòØ‰∫§‰∫íÂºèÂ∫îÁî®ÔºàÂ¶ÇÁºñËæëÂô®„ÄÅÁªòÂõæÂ∑•ÂÖ∑„ÄÅË°®Âçï„ÄÅIDE Á≠âÔºâ‰∏≠ÈùûÂ∏∏ÂÖ≥ÈîÆÁöÑ‰∏ÄÁßçÁî®Êà∑‰ΩìÈ™åÊú∫Âà∂ÔºåÁî®‰∫é **ÊÅ¢Â§ç‰πãÂâçÁä∂ÊÄÅÊàñÈáçÊñ∞Â∫îÁî®Ë¢´Êí§ÈîÄÁöÑÊìç‰Ωú**„ÄÇÂÆÉËÆ©Áî®Êà∑Âú®Êìç‰ΩúËøáÁ®ã‰∏≠Êã•ÊúâÊõ¥Â§öÊéåÊéßÊùÉÔºå‰∏çÂøÖÊãÖÂøÉÊìç‰ΩúÂ§±ËØØÊó†Ê≥ïÂõûÈÄÄ„ÄÇ

---

## ‰∏Ä„ÄÅÊ¶ÇÂøµÁêÜËß£

### ‚úÖ Êí§ÈîÄÔºàUndoÔºâÔºö

> Â∞ÜÁ≥ªÁªüÁä∂ÊÄÅËøòÂéüÂà∞‰∏ä‰∏ÄÊ≠•ÁöÑÁä∂ÊÄÅ„ÄÇ

### ‚úÖ ÈáçÂÅöÔºàRedoÔºâÔºö

> Âú®ÊâßË°åÊí§ÈîÄÊìç‰Ωú‰πãÂêéÔºåÂèØ‰ª•ÂÜçÈáçÊñ∞ÊâßË°åË¢´Êí§ÈîÄÁöÑÊìç‰Ωú„ÄÇ

---

## ‰∫å„ÄÅÂü∫Êú¨ÂéüÁêÜ

Êí§ÈîÄ/ÈáçÂÅöÁ≥ªÁªüÊú¨Ë¥®‰∏äÊòØ‰∏ÄÁßç **‚ÄúÂëΩ‰ª§ÂéÜÂè≤ÁÆ°ÁêÜ‚Äù**Ôºö

* ÊØèÊ¨°Áî®Êà∑ÊâßË°å‰∏Ä‰∏™Êìç‰ΩúÔºåÂ∞±ÊääËØ•Êìç‰ΩúÂ∞ÅË£ÖÊàê‰∏Ä‰∏™ÂØπË±°ÔºàCommandÔºâ
* Êìç‰ΩúË¢´ËÆ∞ÂΩïÂú®‰∏Ä‰∏™ **Êí§ÈîÄÊ†àÔºàUndo StackÔºâ**
* ÂΩìÁî®Êà∑ÁÇπÂáª‚ÄúÊí§ÈîÄ‚ÄùÊó∂Ôºå‰ªéÊí§ÈîÄÊ†à‰∏≠ÂºπÂá∫ÊúÄËøëÁöÑÂëΩ‰ª§ÔºåÂπ∂ÊâßË°åÂÖ∂ `undo()` ÊñπÊ≥ï
* Ë¢´Êí§ÈîÄÁöÑÂëΩ‰ª§‰ºöÂéãÂÖ• **ÈáçÂÅöÊ†àÔºàRedo StackÔºâ**
* Ëã•Áî®Êà∑ÁÇπÂáª‚ÄúÈáçÂÅö‚ÄùÔºå‰ªéÈáçÂÅöÊ†à‰∏≠ÂèñÂá∫ÂëΩ‰ª§ÔºåË∞ÉÁî® `execute()`ÔºåÂÜçÂéãÂõûÊí§ÈîÄÊ†à

Â¶Ç‰∏ãÂõæË°®Á§∫Ôºö

```
ÊâßË°åÊìç‰ΩúÔºöA ‚Üí B ‚Üí C

Êí§ÈîÄ‰∏§Ê≠•ÔºöÊí§ÈîÄ C ‚Üí Êí§ÈîÄ B

ÈáçÂÅö‰∏ÄÊ≠•ÔºöÈáçÂÅö BÔºàÊâßË°å B ÂÜçÊ¨°Ôºâ
```


## ÁÆÄÂçïÂÆûÁé∞
# Âú® Rematch ‰∏≠ÂÆûÁé∞ÂëΩ‰ª§Ê®°ÂºèÊí§ÈîÄ/ÈáçÂÅöÂäüËÉΩ

ÈíàÂØπ‰Ω†ÂΩìÂâç‰ΩøÁî® Rematch ÁÆ°ÁêÜÁä∂ÊÄÅÁöÑÊÉÖÂÜµÔºåÊàëÂ∞ÜÊèê‰æõÂá†ÁßçÊîπËøõÊñπÊ°àÊù•ÂÆûÁé∞Êí§ÈîÄ/ÈáçÂÅöÂäüËÉΩÔºåÂêåÊó∂‰øùÊåÅ‰∏é Rematch ÁöÑÈõÜÊàê„ÄÇ

## ÊñπÊ°à‰∏ÄÔºöÂü∫‰∫é Rematch + ÂëΩ‰ª§Ê®°ÂºèÁöÑÈõÜÊàêÊñπÊ°à

### 1. ÂàõÂª∫ÂëΩ‰ª§ÂéÜÂè≤Ê®°Âûã

```typescript
// models/history.model.ts
import { Dispatch } from "@rematch/core";

interface Command {
  execute(dispatch: Dispatch): void;
  undo(dispatch: Dispatch): void;
}

export interface HistoryModel {
  state: {
    undoStack: Command[];
    redoStack: Command[];
  };
  reducers: {
    executeCommand(state: HistoryModel["state"], command: Command): HistoryModel["state"];
    undo(state: HistoryModel["state"]): HistoryModel["state"];
    redo(state: HistoryModel["state"]): HistoryModel["state"];
  };
}

export const history: HistoryModel = {
  state: {
    undoStack: [],
    redoStack: [],
  },
  reducers: {
    executeCommand(state, command) {
      return {
        undoStack: [...state.undoStack, command],
        redoStack: [], // ÊâßË°åÊñ∞ÂëΩ‰ª§Êó∂Ê∏ÖÁ©∫ÈáçÂÅöÊ†à
      };
    },
    undo(state) {
      if (state.undoStack.length === 0) return state;
      const command = state.undoStack[state.undoStack.length - 1];
      return {
        undoStack: state.undoStack.slice(0, -1),
        redoStack: [...state.redoStack, command],
      };
    },
    redo(state) {
      if (state.redoStack.length === 0) return state;
      const command = state.redoStack[state.redoStack.length - 1];
      return {
        undoStack: [...state.undoStack, command],
        redoStack: state.redoStack.slice(0, -1),
      };
    },
  },
};
```

### 2. ÂàõÂª∫‰∏öÂä°Ê®°Âûã‰∏éÂëΩ‰ª§

```typescript
// models/todos.model.ts
import { Dispatch } from "@rematch/core";
import { Command } from "./history.model";

export interface Todo {
  id: string;
  text: string;
  completed: boolean;
}

export interface TodosModel {
  state: Todo[];
  reducers: {
    add(state: Todo[], payload: Todo): Todo[];
    toggle(state: Todo[], id: string): Todo[];
    updateState(state: Todo[], payload: Todo[]): Todo[];
  };
}

export const todos: TodosModel = {
  state: [],
  reducers: {
    add(state, payload) {
      return [...state, payload];
    },
    toggle(state, id) {
      return state.map(todo =>
        todo.id === id ? { ...todo, completed: !todo.completed } : todo
      );
    },
    updateState(_, payload) {
      return payload;
    },
  },
};

// ÂàõÂª∫ÂÖ∑‰ΩìÁöÑÂëΩ‰ª§Á±ª
export class AddTodoCommand implements Command {
  constructor(
    private dispatch: Dispatch,
    private todo: Todo
  ) {}

  execute() {
    this.dispatch.todos.add(this.todo);
  }

  undo() {
    this.dispatch.todos.updateState(
      this.dispatch.todos.getState().filter(t => t.id !== this.todo.id)
    );
  }
}

export class ToggleTodoCommand implements Command {
  constructor(
    private dispatch: Dispatch,
    private id: string
  ) {}

  execute() {
    this.dispatch.todos.toggle(this.id);
  }

  undo() {
    this.dispatch.todos.toggle(this.id); // ÂàáÊç¢‰∏§Ê¨°Á≠â‰∫éÊí§ÈîÄ
  }
}
```

### 3. ÈÖçÁΩÆ Rematch Store

```typescript
// store.ts
import { init, RematchDispatch, RematchRootState } from "@rematch/core";
import { history } from "./models/history.model";
import { todos, Todo } from "./models/todos.model";

const store = init({
  models: {
    history,
    todos,
  },
});

export type Dispatch = RematchDispatch<typeof models>;
export type RootState = RematchRootState<typeof models>;
export default store;
```

### 4. Âú®ÁªÑ‰ª∂‰∏≠‰ΩøÁî®

```tsx
import React, { useState } from "react";
import { useDispatch, useSelector } from "react-redux";
import { Dispatch, RootState } from "./store";
import { AddTodoCommand, ToggleTodoCommand } from "./models/todos.model";

const TodoApp = () => {
  const dispatch = useDispatch<Dispatch>();
  const todos = useSelector((state: RootState) => state.todos);
  const history = useSelector((state: RootState) => state.history);
  const [text, setText] = useState("");

  const handleAdd = () => {
    const newTodo = {
      id: Date.now().toString(),
      text,
      completed: false,
    };
    const command = new AddTodoCommand(dispatch, newTodo);
    command.execute();
    dispatch.history.executeCommand(command);
    setText("");
  };

  const handleToggle = (id: string) => {
    const command = new ToggleTodoCommand(dispatch, id);
    command.execute();
    dispatch.history.executeCommand(command);
  };

  const handleUndo = () => {
    if (history.undoStack.length === 0) return;
    const command = history.undoStack[history.undoStack.length - 1];
    command.undo();
    dispatch.history.undo();
  };

  const handleRedo = () => {
    if (history.redoStack.length === 0) return;
    const command = history.redoStack[history.redoStack.length - 1];
    command.execute();
    dispatch.history.redo();
  };

  return (
    <div>
      <h1>Todo List with Undo/Redo</h1>
      <div>
        <input
          value={text}
          onChange={(e) => setText(e.target.value)}
          placeholder="New todo"
        />
        <button onClick={handleAdd}>Add</button>
      </div>
      <div>
        <button onClick={handleUndo} disabled={history.undoStack.length === 0}>
          Undo
        </button>
        <button onClick={handleRedo} disabled={history.redoStack.length === 0}>
          Redo
        </button>
      </div>
      <ul>
        {todos.map((todo) => (
          <li
            key={todo.id}
            onClick={() => handleToggle(todo.id)}
            style={{ textDecoration: todo.completed ? "line-through" : "none" }}
          >
            {todo.text}
          </li>
        ))}
      </ul>
      <div>
        <h3>History</h3>
        <p>Undo stack: {history.undoStack.length}</p>
        <p>Redo stack: {history.redoStack.length}</p>
      </div>
    </div>
  );
};

export default TodoApp;
```

## ÊñπÊ°à‰∫åÔºöÁªìÂêà Redux Undo ÁöÑÁÆÄÂåñÊñπÊ°à

Â¶ÇÊûú‰Ω†‰∏çÈúÄË¶ÅÂÆåÊï¥ÁöÑÂëΩ‰ª§Ê®°ÂºèÔºåÂèØ‰ª•‰ΩøÁî®Êõ¥ÁÆÄÂçïÁöÑ Redux Undo ÈõÜÊàêÔºö

```typescript
// store.ts
import { init } from "@rematch/core";
import undoable from "redux-undo";

const todos = {
  state: [],
  reducers: {
    add(state, payload) {
      return [...state, payload];
    },
    toggle(state, id) {
      return state.map(todo =>
        todo.id === id ? { ...todo, completed: !todo.completed } : todo
      );
    },
    // ÂøÖÈ°ªÊ∑ªÂä†Ëøô‰∏™reducerÊù•Â§ÑÁêÜÂéÜÂè≤Áä∂ÊÄÅÊõ¥Êñ∞
    updateState(_, payload) {
      return payload;
    },
  },
};

const store = init({
  models: {
    todos: undoable(todos, {
      limit: 10,
      undoType: "todos/UNDO",
      redoType: "todos/REDO",
      clearHistoryType: "todos/CLEAR_HISTORY",
      filter: (action, currentState, previousState) => {
        // ËøáÊª§‰∏çÈúÄË¶ÅËÆ∞ÂΩïÂéÜÂè≤ÁöÑaction
        return !action.type.startsWith("todos/updateState");
      },
    }),
  },
});

export default store;
```

## ‰∏§ÁßçÊñπÊ°àÁöÑÂØπÊØî

| ÁâπÊÄß               | ÂëΩ‰ª§Ê®°ÂºèÊñπÊ°à                          | Redux Undo ÊñπÊ°à               |
|--------------------|-------------------------------------|-------------------------------|
| ÂÆûÁé∞Â§çÊùÇÂ∫¶         | ËæÉÈ´ò                                | ËæÉ‰Ωé                          |
| ÁÅµÊ¥ªÊÄß             | È´òÔºåÂèØ‰ª•Ëá™ÂÆö‰πâÊØè‰∏™ÂëΩ‰ª§ÁöÑË°å‰∏∫         | ‰∏≠ÔºåÂü∫‰∫éÁä∂ÊÄÅÂø´ÁÖß              |
| ‰∏é Rematch ÈõÜÊàêÂ∫¶  | ÈúÄË¶ÅÈ¢ùÂ§ñÁÆ°ÁêÜÂëΩ‰ª§ÂéÜÂè≤                 | Áõ¥Êé•ÈõÜÊàê                      |
| ÈÄÇÁî®Âú∫ÊôØ           | ÈúÄË¶ÅÁ≤æÁ°ÆÊéßÂà∂Êí§ÈîÄ/ÈáçÂÅöË°å‰∏∫ÁöÑÂ§çÊùÇÂú∫ÊôØ  | ÁÆÄÂçïÁöÑÊí§ÈîÄ/ÈáçÂÅöÈúÄÊ±Ç           |
| ÂÜÖÂ≠ò‰ΩøÁî®           | ËæÉÈ´òÔºåÂ≠òÂÇ®ÂëΩ‰ª§ÂØπË±°                   | ‰∏≠Á≠âÔºåÂ≠òÂÇ®Áä∂ÊÄÅÂø´ÁÖß            |
| ÂéÜÂè≤ËÆ∞ÂΩïÂèØËØªÊÄß     | Â•ΩÔºåÂëΩ‰ª§ÊúâÊòéÁ°ÆËØ≠‰πâ                   | ‰∏ÄËà¨ÔºåÂè™ÊúâÁä∂ÊÄÅÂ∑ÆÂºÇ            |

## ÊúÄ‰Ω≥ÂÆûË∑µÂª∫ËÆÆ

1. **ÁÆÄÂçïÂ∫îÁî®**Ôºö‰ΩøÁî® Redux Undo ÊñπÊ°àÔºåÂø´ÈÄüÂÆûÁé∞Âü∫Êú¨Êí§ÈîÄ/ÈáçÂÅöÂäüËÉΩ
2. **Â§çÊùÇÂ∫îÁî®**ÔºöÈááÁî®ÂëΩ‰ª§Ê®°ÂºèÊñπÊ°àÔºåËé∑ÂæóÊõ¥Á≤æÁ°ÆÁöÑÊéßÂà∂ËÉΩÂäõ
3. **ÊÄßËÉΩ‰ºòÂåñ**Ôºö
   - ÈôêÂà∂ÂéÜÂè≤ËÆ∞ÂΩïÊï∞Èáè
   - ÂØπ‰∫éÂ§ßÂûãÁä∂ÊÄÅÔºåËÄÉËôëÂè™ËÆ∞ÂΩïÁä∂ÊÄÅÂ∑ÆÂºÇËÄåÈùûÂÆåÊï¥Áä∂ÊÄÅ
   - ‰ΩøÁî®‰∏çÂèØÂèòÊï∞ÊçÆÊèêÈ´òÊÄßËÉΩ
4. **Áî®Êà∑‰ΩìÈ™å**Ôºö
   - Êèê‰æõÊ∏ÖÊô∞ÁöÑÂèØËßÜÂåñÂéÜÂè≤ËÆ∞ÂΩï
   - Á¶ÅÁî®‰∏çÂèØÁî®ÁöÑÊí§ÈîÄ/ÈáçÂÅöÊåâÈíÆ
   - ËÄÉËôëÊ∑ªÂä†ÈîÆÁõòÂø´Êç∑ÈîÆÊîØÊåÅ

## Êâ©Â±ïÂäüËÉΩÂÆûÁé∞

### 1. ÂéÜÂè≤ËÆ∞ÂΩïÈ¢ÑËßà

```tsx
function HistoryPreview() {
  const history = useSelector((state: RootState) => state.history);
  
  return (
    <div>
      <h3>History Preview</h3>
      <div>
        {history.undoStack.map((command, index) => (
          <div key={index}>
            <button onClick={() => jumpToCommand(index)}>
              {command.constructor.name} at step {index}
            </button>
          </div>
        ))}
      </div>
    </div>
  );
}
```

### 2. ‰∏ÄÈîÆË∑≥ËΩ¨Âà∞ÁâπÂÆöÂéÜÂè≤Ê≠•È™§

```typescript
// Âú® history.model.ts ‰∏≠Ê∑ªÂä†
reducers: {
  jumpTo(state, payload: number) {
    if (payload < 0 || payload >= state.undoStack.length) return state;
    
    const commandsToUndo = state.undoStack.slice(payload);
    const newUndoStack = state.undoStack.slice(0, payload);
    const newRedoStack = [...commandsToUndo.reverse(), ...state.redoStack];
    
    return {
      undoStack: newUndoStack,
      redoStack: newRedoStack,
    };
  },
}
```

### 3. Ê∑ªÂä†Êó∂Èó¥Êà≥ÂíåÊèèËø∞

```typescript
interface TimestampedCommand extends Command {
  timestamp: number;
  description: string;
}

class AddTodoCommand implements TimestampedCommand {
  timestamp = Date.now();
  
  get description() {
    return `Add todo: ${this.todo.text}`;
  }
  
  // ...ÂéüÊúâÂÆûÁé∞
}
```

## ÊÄªÁªì

Âú® Rematch ‰∏≠ÂÆûÁé∞Êí§ÈîÄ/ÈáçÂÅöÂäüËÉΩÁöÑÂÖ≥ÈîÆÁÇπÔºö

1. **ÊòéÁ°ÆÈúÄÊ±Ç**ÔºöÊ†πÊçÆÂ∫îÁî®Â§çÊùÇÂ∫¶ÈÄâÊã©ÂêàÈÄÇÁöÑÊñπÊ°à
2. **‰øùÊåÅÁä∂ÊÄÅ‰∏çÂèØÂèò**ÔºöËøôÊòØÊí§ÈîÄ/ÈáçÂÅöÂäüËÉΩÁöÑÂü∫Á°Ä
3. **ÂêàÁêÜËÆæËÆ°ÂëΩ‰ª§**ÔºöÊØè‰∏™ÂëΩ‰ª§Â∫îËØ•Â∞ÅË£ÖÂÆåÊï¥ÁöÑÊâßË°åÂíåÊí§ÈîÄÈÄªËæë
4. **ÊÄßËÉΩËÄÉËôë**ÔºöÈôêÂà∂ÂéÜÂè≤ËÆ∞ÂΩïÊï∞ÈáèÔºåÈÅøÂÖçÂÜÖÂ≠òÈóÆÈ¢ò
5. **ËâØÂ•ΩÁî®Êà∑‰ΩìÈ™å**ÔºöÊèê‰æõÊ∏ÖÊô∞ÁöÑÂéÜÂè≤ËÆ∞ÂΩïÂ±ïÁ§∫ÂíåÊìç‰ΩúÂèçÈ¶à

ÈÄöËøá‰ª•‰∏äÊñπÊ°àÔºå‰Ω†ÂèØ‰ª•Âú®‰øùÊåÅ Rematch Áä∂ÊÄÅÁÆ°ÁêÜÁöÑÂêåÊó∂ÔºåÂÆûÁé∞Âº∫Â§ßÁöÑÊí§ÈîÄ/ÈáçÂÅöÂäüËÉΩ„ÄÇ
