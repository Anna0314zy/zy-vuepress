---
title: é™æ€èµ„æºåŠ¨æ€åŠ è½½
tags:
   - Vite
---

## âœ… åœºæ™¯è¯´æ˜ï¼šé™æ€èµ„æºåŠ¨æ€åŠ è½½

å‡è®¾ä½ æœ‰ä¸€å †å›¾ç‰‡åœ¨ `src/assets/images/` ä¸‹ï¼Œæƒ³æ ¹æ®ç”¨æˆ·æ“ä½œåŠ¨æ€åŠ è½½ä¸åŒçš„èµ„æºï¼Œè€Œä¸æ˜¯å†™æ­»è·¯å¾„ã€‚

---

### æ–¹æ¡ˆ 1ï¼šä½¿ç”¨ `import.meta.glob` åŠ¨æ€å¯¼å…¥ï¼ˆæ¨è âœ…ï¼‰


#### ğŸ“¦ ç¤ºä¾‹ç»“æ„ï¼š

```
src/
â””â”€â”€ assets/
    â””â”€â”€ images/
        â”œâ”€â”€ a.png
        â”œâ”€â”€ b.png
        â””â”€â”€ c.png
```

####  âœ… ç”¨æ³•ç¤ºä¾‹ï¼š

```ts
// assetsLoader.ts
const images = import.meta.glob('../assets/images/*.png', { eager: true });

const imageMap: Record<string, string> = {};
for (const path in images) {
  const fileName = path.split('/').pop()?.replace('.png', '');
  if (fileName) {
    imageMap[fileName] = (images[path] as { default: string }).default;
  }
}

export function getImageUrl(name: string) {
  return imageMap[name]; // ä¾‹å¦‚ getImageUrl('a') è¿”å› /assets/images/a-xxxx.png
}

```

####  âœ… é¡µé¢ä¸­ä½¿ç”¨ï¼š

```vue
<template>
  <img :src="getImageUrl('a')" />
</template>

<script setup lang="ts">
import { getImageUrl } from './assetsLoader';
</script>
```

---
### æ–¹æ¡ˆ 2ï¼šimport å¯¼å…¥
:::important

è·¯å¾„åº”è¯¥æ˜¯éƒ¨åˆ†æ‹¼æ¥çš„ vite ä¼šæŠŠè¯¥ç›®å½•ä¸‹æ‰€æœ‰å›¾ç‰‡æ‰“åŒ…

:::
```ts
const handleClick = (item: { name: string }) => {
    import(`../assets/images/${item.name}.png`).then((res) => {
        console.log('res', res);//æ‹¿åˆ°æ‰“åŒ…ä¹‹åçš„è·¯å¾„
        imageRef.value = res.default;
    }).catch((err) => {
        console.log('err', err);
    });
};

```



### æ–¹æ¡ˆ 3ï¼šç”¨ `new URL()` æ„é€ è·¯å¾„ï¼ˆé€‚ç”¨äºå·²çŸ¥èµ„æºï¼‰

```ts
const imageUrl = new URL(`../assets/images/${fileName}.png`, import.meta.url).href;
```

* ä¼˜ç‚¹ï¼šç®€å•æ˜äº†
* ç¼ºç‚¹ï¼š**ä¸æ”¯æŒå˜é‡æ‹¼æ¥è·¯å¾„**ï¼Œä¼šåœ¨æ„å»ºæ—¶æŠ¥é”™ï¼Œå¿…é¡»æ˜¯é™æ€å¯åˆ†æè·¯å¾„

:::important

è·¯å¾„åº”è¯¥æ˜¯éƒ¨åˆ†æ‹¼æ¥çš„ vite ä¼šæŠŠè¯¥ç›®å½•ä¸‹æ‰€æœ‰å›¾ç‰‡æ‰“åŒ…

:::

```ts
// âŒ é”™è¯¯å†™æ³•ï¼šVite æ— æ³•åˆ†æ
const url = new URL(`../assets/images/${dynamicName}.png`, import.meta.url).href;
```

---

### æ–¹æ¡ˆ 4ï¼šæ”¾åœ¨ `public/` ç›®å½•ä¸­ä½¿ç”¨ åæœŸä¸å¥½ç»´æŠ¤

ä½ ä¹Ÿå¯ä»¥å°†èµ„æºæ”¾åœ¨ `public` æ–‡ä»¶å¤¹ä¸‹ï¼š

```
public/
â””â”€â”€ images/
    â”œâ”€â”€ a.png
    â””â”€â”€ b.png
```

ç„¶åç›´æ¥æ‹¼æ¥è·¯å¾„ï¼š

```ts
const imgSrc = `/images/${fileName}.png`;
```

* ä¼˜ç‚¹ï¼šæ— éœ€å¯¼å…¥ï¼Œç›´æ¥æ‹¼è·¯å¾„
* ç¼ºç‚¹ï¼šæ— æ„å»ºä¼˜åŒ–ï¼Œä¸ä¼šèµ° Vite çš„èµ„æºå“ˆå¸Œå¤„ç†ç­‰

---

#### ğŸš€ æ€»ç»“

| æ–¹æ³•                 | æ˜¯å¦æ”¯æŒå˜é‡è·¯å¾„ | æ˜¯å¦ä¼˜åŒ–æ„å»º | æ¨èåœºæ™¯               |
| ------------------ | -------- | ------ | ------------------ |
| `import.meta.glob` | âœ…        | âœ…      | **æ‰¹é‡åŠ è½½èµ„æºï¼Œç»„ä»¶è‡ªåŠ¨æ˜ å°„ç­‰** |
| `new URL()`        | âŒï¼ˆå˜é‡ä¸è¡Œï¼‰  | âœ…      | å°‘é‡é™æ€èµ„æºå¼•ç”¨           |
| `public/` ç›®å½•å¼•ç”¨     | âœ…        | âŒ      | æ— éœ€æ„å»ºã€ç›´æ¥å¼•ç”¨åœºæ™¯        |

---

