<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
var isAnagram = function(s, t) {
  if (s.length !== t.length) return false;

  if (s === t) return false; // 增加这一句：顺序相同不算变位词

  let char_count = new Map();

  for (let char of s) {
    char_count.set(char, (char_count.get(char) || 0) + 1);
  }

  for (let char of t) {
    if (!char_count.get(char)) return false;
    char_count.set(char, char_count.get(char) - 1);
  }
 console.log(char_count)
  return true;
};

var intersect = function(nums1, nums2) {
  const map = new Map();
  const result = [];

  for (let num of nums1) {
    map.set(num, (map.get(num) || 0) + 1);
  }

  for (let num of nums2) {
    console.log(map)
    if (map.get(num) > 0) {
      result.push(num);
      map.set(num, map.get(num) - 1);
    }
  }

  return result;
};

console.log(intersect([1, 2, 2, 1], [2, 2]));         // [2, 2]
console.log(intersect([4, 9, 5], [9, 4, 9, 8, 4]));   // [4, 9]
console.log(intersect([1, 2, 3, 4, 5], [3, 3, 4, 4, 5, 6])); // [3, 4, 5]


var twoSum = function (nums, target) {
  let hash = {};
  for (let i = 0; i < nums.length; i++) {  // 遍历当前元素，并在map中寻找是否有匹配的key
    if (hash[target - nums[i]] !== undefined) {
      return [i, hash[target - nums[i]]];
    }
    hash[nums[i]] = i;   // 如果没找到匹配对，就把访问过的元素和下标加入到map中
  }
  return [];
};
// 测试
console.log(twoSum([2, 7, 11, 15], 9));    // [0, 1]
console.log(twoSum([3, 2, 4], 6));         // [1, 2]
console.log(twoSum([3, 3], 6));            // [0, 1]

var threeSum = function (nums) {
    // nsum通用解法核心方法
    function nSumTarget(nums, n, start, target) {
        // 前提：nums要先排序好
        let res = [];
        if (n === 2) {
            res = towSumTarget(nums, start, target);
        } else {
            for (let i = start; i < nums.length; i++) {
                // 递归求(n - 1)sum
                let subRes = nSumTarget(
                    nums,
                    n - 1,
                    i + 1,
                    target - nums[i]
                );
                for (let j = 0; j < subRes.length; j++) {
                    res.push([nums[i], ...subRes[j]]);
                }
                // 跳过相同元素
                while (nums[i] === nums[i + 1]) i++;
            }
        }
        return res;
    }

    function towSumTarget(nums, start, target) {
        // 前提：nums要先排序好
        let res = [];
        let len = nums.length;
        let left = start;
        let right = len - 1;
        while (left < right) {
            let sum = nums[left] + nums[right];
            if (sum < target) {
                while (nums[left] === nums[left + 1]) left++;
                left++;
            } else if (sum > target) {
                while (nums[right] === nums[right - 1]) right--;
                right--;
            } else {
                // 相等
                res.push([nums[left], nums[right]]);
                // 跳过相同元素
                while (nums[left] === nums[left + 1]) left++;
                while (nums[right] === nums[right - 1]) right--;
                left++;
                right--;
            }
        }
        return res;
    }
    
    // 先排序
    nums.sort((a, b) => a - b);
    // n = 3，此时求3sum之和
    return nSumTarget(nums, 3, 0, 0);
};

// 测试
console.log(threeSum([-1, 0, 1, 2, -1, -4])); 
// 输出: [ [-1, -1, 2], [-1, 0, 1] ]

console.log(towSumTarget(-1, 0, 1, 2, -1, -4))
    </script>
</body>
</html>