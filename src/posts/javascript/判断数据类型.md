---
title: åˆ¤æ–­æ•°æ®ç±»å‹
date: 2020-04-19
tags:
  - js åŸºç¡€
---

åœ¨ JavaScript ä¸­ï¼Œåˆ¤æ–­æ•°æ®ç±»å‹æœ‰**ä¸‰ç§å¸¸è§çš„æ–¹æ³•**ï¼š

1. **`typeof` åˆ¤æ–­åŸºæœ¬ç±»å‹**
2. **`instanceof` åˆ¤æ–­å¼•ç”¨ç±»å‹**
3. **`Object.prototype.toString.call()` ç²¾ç¡®åˆ¤æ–­æ‰€æœ‰ç±»å‹**

---

## **1ï¸âƒ£ `typeof` åˆ¤æ–­åŸºæœ¬ç±»å‹**
`typeof` é€‚ç”¨äº **åˆ¤æ–­åŸºæœ¬æ•°æ®ç±»å‹**ï¼Œä½†å¯¹ `null` å’Œå¯¹è±¡ä¸å¤Ÿç²¾ç¡®ã€‚

### **ğŸ“Œ è¯­æ³•**
```js
console.log(typeof 123);       // "number"
console.log(typeof "hello");   // "string"
console.log(typeof true);      // "boolean"
console.log(typeof undefined); // "undefined"
console.log(typeof Symbol());  // "symbol"
console.log(typeof BigInt(10));// "bigint"

console.log(typeof {});        // "object"
console.log(typeof []);        // "object"
console.log(typeof null);      // "object" âŒ (å†å²é—ç•™é—®é¢˜)
console.log(typeof function(){}); // "function" âœ…
```
### **âœ… ä¼˜åŠ¿**
- å¯ç”¨äºæ£€æµ‹ **åŸºæœ¬ç±»å‹** (`number`ã€`string`ã€`boolean` ç­‰)
- `typeof function() {}` è¿”å› `"function"`ï¼Œå¯åˆ¤æ–­å‡½æ•°ç±»å‹

### **ğŸš¨ ç¼ºç‚¹**
- `typeof null === "object"` âŒï¼ˆå†å²é—ç•™é—®é¢˜ï¼‰
- `typeof [] === "object"` âŒï¼ˆæ— æ³•åŒºåˆ†æ•°ç»„å’Œå¯¹è±¡ï¼‰
- `typeof new Date() === "object"` âŒï¼ˆæ— æ³•åŒºåˆ†æ—¥æœŸå’Œæ™®é€šå¯¹è±¡ï¼‰

---

## **2ï¸âƒ£ `instanceof` åˆ¤æ–­å¼•ç”¨ç±»å‹**
`instanceof` ç”¨äºæ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦**å±äºæŸä¸ªæ„é€ å‡½æ•°çš„å®ä¾‹**ï¼Œé€‚ç”¨äº**å¯¹è±¡ã€æ•°ç»„ã€æ—¥æœŸã€æ­£åˆ™ç­‰**ã€‚

### **ğŸ“Œ è¯­æ³•**
```js
console.log([] instanceof Array); // true
console.log({} instanceof Object); // true
console.log(new Date() instanceof Date); // true
console.log(/abc/ instanceof RegExp); // true

function Person() {}
const p = new Person();
console.log(p instanceof Person); // true
```
### **âœ… ä¼˜åŠ¿**
- å¯åˆ¤æ–­è‡ªå®šä¹‰å¯¹è±¡å®ä¾‹ï¼Œå¦‚ `new Person() instanceof Person`
- å¯åˆ¤æ–­ `Array`ã€`Date`ã€`RegExp`ã€`Function` ç­‰å¼•ç”¨ç±»å‹

### **ğŸš¨ ç¼ºç‚¹**
- ä¸èƒ½åˆ¤æ–­ `null` å’Œ `undefined`
- åªèƒ½ç”¨äº**å¯¹è±¡**ï¼Œä¸èƒ½ç”¨äºåŸºæœ¬ç±»å‹
- å—åŸå‹é“¾å½±å“ï¼Œ**å¦‚æœæ”¹å˜ `prototype`ï¼Œ`instanceof` å¯èƒ½å¤±æ•ˆ**
  ```js
  function Person() {}
  const p = new Person();
  Person.prototype = {};
  console.log(p instanceof Person); // false âŒï¼ˆå› ä¸ºåŸå‹é“¾è¢«ä¿®æ”¹ï¼‰
  ```

---

## **3ï¸âƒ£ `Object.prototype.toString.call()`ï¼ˆæœ€ç²¾å‡†ï¼‰**
`Object.prototype.toString.call()` **å¯ä»¥ç²¾ç¡®åˆ¤æ–­æ‰€æœ‰æ•°æ®ç±»å‹**ï¼Œå®ƒè¿”å› `"[object ç±»å‹]"` å­—ç¬¦ä¸²ã€‚

### **ğŸ“Œ è¯­æ³•**
```js
console.log(Object.prototype.toString.call(123));     // "[object Number]"
console.log(Object.prototype.toString.call("hello")); // "[object String]"
console.log(Object.prototype.toString.call(true));    // "[object Boolean]"
console.log(Object.prototype.toString.call(null));    // "[object Null]"
console.log(Object.prototype.toString.call(undefined)); // "[object Undefined]"
console.log(Object.prototype.toString.call(Symbol())); // "[object Symbol]"
console.log(Object.prototype.toString.call(BigInt(10))); // "[object BigInt]"

console.log(Object.prototype.toString.call([]));    // "[object Array]"
console.log(Object.prototype.toString.call({}));    // "[object Object]"
console.log(Object.prototype.toString.call(new Date())); // "[object Date]"
console.log(Object.prototype.toString.call(/abc/)); // "[object RegExp]"
console.log(Object.prototype.toString.call(function() {})); // "[object Function]"
```
### **âœ… ä¼˜åŠ¿**
- **å¯ä»¥ç²¾ç¡®åˆ¤æ–­æ‰€æœ‰æ•°æ®ç±»å‹**
- **é€‚ç”¨äºåŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹**
- **è§£å†³ `typeof` å’Œ `instanceof` çš„å±€é™æ€§**

### **ğŸš¨ ç¼ºç‚¹**
- **éœ€è¦è°ƒç”¨ `call()`ï¼Œç¨æ˜¾ç¹ç**
- **è¿”å›çš„æ˜¯å­—ç¬¦ä¸²ï¼Œéœ€è¦å¤„ç†å­—ç¬¦ä¸²åŒ¹é…**

ğŸ“Œ **å°è£…ä¸€ä¸ªé€šç”¨çš„ç±»å‹åˆ¤æ–­å‡½æ•°**
```js
function getType(value) {
    return Object.prototype.toString.call(value).slice(8, -1);
}

console.log(getType(123));     // "Number"
console.log(getType("hello")); // "String"
console.log(getType(null));    // "Null"
console.log(getType(undefined)); // "Undefined"
console.log(getType([]));      // "Array"
console.log(getType({}));      // "Object"
console.log(getType(new Date())); // "Date"
console.log(getType(/abc/));   // "RegExp"
console.log(getType(function() {})); // "Function"
```

---

## **ğŸ”š æ€»ç»“**
| æ–¹æ³• | **é€‚ç”¨èŒƒå›´** | **ä¼˜ç‚¹** | **ç¼ºç‚¹** |
|------|------------|----------|----------|
| `typeof` | åŸºæœ¬ç±»å‹ | ç®€å•ç›´è§‚ï¼Œé€‚ç”¨äº `string`ã€`number`ã€`boolean` | `null` åˆ¤æ–­é”™è¯¯ï¼Œæ— æ³•åŒºåˆ†å¯¹è±¡ã€æ•°ç»„ |
| `instanceof` | å¼•ç”¨ç±»å‹ | åˆ¤æ–­å¯¹è±¡æ˜¯å¦æ˜¯æŸä¸ªç±»çš„å®ä¾‹ | æ— æ³•åˆ¤æ–­åŸºæœ¬ç±»å‹ï¼Œå—åŸå‹é“¾å½±å“ |
| `Object.prototype.toString.call()` | **æ‰€æœ‰ç±»å‹** | **æœ€ç²¾å‡†ï¼Œé€‚ç”¨äºåŸºæœ¬+å¼•ç”¨ç±»å‹** | éœ€è¦é¢å¤–è°ƒç”¨ `.slice(8, -1)` |

### **âœ… ä»€ä¹ˆæ—¶å€™ç”¨å“ªä¸ªï¼Ÿ**
1. **åŸºæœ¬ç±»å‹**ï¼ˆå¦‚ `string`ã€`number`ã€`boolean`ï¼‰ğŸ‘‰ `typeof`
2. **åˆ¤æ–­å¯¹è±¡æ˜¯å¦å±äºæŸä¸ªç±»**ï¼ˆå¦‚ `new Array() instanceof Array`ï¼‰ğŸ‘‰ `instanceof`
3. **åˆ¤æ–­æ‰€æœ‰ç±»å‹ï¼ˆæœ€ç²¾ç¡®ï¼‰** ğŸ‘‰ `Object.prototype.toString.call()`

ğŸ’¡ **å¦‚æœè¦æ±‚æœ€ç²¾å‡†çš„åˆ¤æ–­ï¼Œæ¨è `Object.prototype.toString.call()`** ğŸš€