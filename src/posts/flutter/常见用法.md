---
title: flutter åŸºç¡€ç»„ä»¶
tags:
   - flutter
---

## ä¸€ã€SizedBox å’Œ Container
### ğŸ§© **SizedBox**
**æ ¸å¿ƒä½œç”¨**ï¼š**ç²¾ç¡®æ§åˆ¶å°ºå¯¸**çš„è½»é‡çº§ç›’å­  
**è®¾è®¡å“²å­¦**ï¼šåšä¸€ä»¶äº‹ä¸”åšå¥½ï¼ˆå•ä¸€èŒè´£åŸåˆ™ï¼‰

| ç‰¹æ€§ | è¯´æ˜ |
|-------|------|
| âœ… **å°ºå¯¸æ§åˆ¶** | å¼ºåˆ¶è®¾ç½®**å›ºå®šå®½é«˜**ï¼ˆ`width`/`height`ï¼‰ |
| âœ… **å ä½ç©ºé—´** | å¯åˆ›å»ºç©ºç™½åŒºåŸŸï¼ˆæ—  child æ—¶ï¼‰ |
| ğŸš« **è£…é¥°èƒ½åŠ›** | æ— é¢œè‰²/è¾¹æ¡†/é˜´å½±ç­‰è£…é¥°å±æ€§ |
| ğŸš« **è¾¹è·æ§åˆ¶** | æ—  padding/margin å±æ€§ |
| âš¡ **æ€§èƒ½** | æè½»é‡ï¼ˆä»…å¤„ç†å°ºå¯¸çº¦æŸï¼‰ |

```dart
// åŸºæœ¬ç”¨æ³•
SizedBox(
  width: 100,
  height: 50,
  child: Text("å›ºå®šå°ºå¯¸"),
)

// å ä½ç¬¦
SizedBox(height: 20) // å‚ç›´é—´è·
SizedBox(width: 10)  // æ°´å¹³é—´è·
```

---

### ğŸ **Container**
**æ ¸å¿ƒä½œç”¨**ï¼š**å¤šåŠŸèƒ½å®¹å™¨**ï¼ˆç»„åˆå‹ç»„ä»¶ï¼‰  
**è®¾è®¡å“²å­¦**ï¼šä¸€ç«™å¼å¸ƒå±€è§£å†³æ–¹æ¡ˆï¼ˆç»„åˆå¤šä¸ªåŠŸèƒ½ï¼‰

| ç‰¹æ€§ | è¯´æ˜ |
|-------|------|
| âœ… **å°ºå¯¸æ§åˆ¶** | å¯é€‰å®½é«˜ï¼ˆä¸è®¾ç½®åˆ™è‡ªé€‚åº”å†…å®¹ï¼‰ |
| âœ… **è£…é¥°ç³»ç»Ÿ** | æ”¯æŒé¢œè‰²/è¾¹æ¡†/é˜´å½±/æ¸å˜/åœ†è§’ç­‰ï¼ˆ`decoration`ï¼‰ |
| âœ… **è¾¹è·æ§åˆ¶** | å†…ç½® `padding` å’Œ `margin` |
| âœ… **å˜æ¢èƒ½åŠ›** | æ”¯æŒæ—‹è½¬/å¹³ç§»ç­‰å˜æ¢ï¼ˆ`transform`ï¼‰ |
| âœ… **å¯¹é½æ§åˆ¶** | å¯è®¾ç½®å­å…ƒç´ å¯¹é½æ–¹å¼ï¼ˆ`alignment`ï¼‰ |
| âš ï¸ **æ€§èƒ½** | ç›¸å¯¹è¾ƒé‡ï¼ˆç»„åˆå¤šä¸ªåº•å±‚ç»„ä»¶ï¼‰ |

```dart
Container(
  width: 200,
  height: 100,
  margin: EdgeInsets.all(10),
  padding: EdgeInsets.symmetric(vertical: 8),
  decoration: BoxDecoration(
    color: Colors.blue,
    borderRadius: BorderRadius.circular(12),
    boxShadow: [BoxShadow(blurRadius: 5)]
  ),
  alignment: Alignment.center,
  child: Text("å¤šåŠŸèƒ½å®¹å™¨"),
)
```

---

### ğŸ”‘ **æ ¸å¿ƒåŒºåˆ«æ€»ç»“**
| ç‰¹æ€§                | SizedBox                     | Container                  |
|---------------------|------------------------------|----------------------------|
| **æœ¬è´¨**            | çº¯å°ºå¯¸çº¦æŸå·¥å…·               | ç»„åˆå‹å¸ƒå±€å®¹å™¨             |
| **å°ºå¯¸è®¾ç½®**        | å¿…é¡»æ˜¾å¼å£°æ˜å®½é«˜             | å¯é€‰ï¼ˆå¯è‡ªé€‚åº”å†…å®¹ï¼‰       |
| **è£…é¥°èƒ½åŠ›**        | âŒ ä¸æ”¯æŒ                    | âœ… å®Œæ•´è£…é¥°ç³»ç»Ÿ            |
| **è¾¹è·æ§åˆ¶**        | âŒ éœ€é…åˆ Padding ç»„ä»¶       | âœ… å†…ç½® padding/margin     |
| **æœ€ä½³åœºæ™¯**        | ç²¾ç¡®å°ºå¯¸æ§åˆ¶/ç®€å•å ä½        | éœ€è¦å¤æ‚æ ·å¼/ç»„åˆå¸ƒå±€      |
| **æ€§èƒ½å½±å“**        | æ¥è¿‘é›¶å¼€é”€                   | ä¸­ç­‰å¼€é”€ï¼ˆç»„åˆå¤šä¸ªç»„ä»¶ï¼‰   |
| **ç­‰æ•ˆå®ç°**        | æ— è£…é¥°çš„ ConstrainedBox      | Padding + DecoratedBox + Transform ç­‰ç»„åˆ |

---

### ğŸ§  **ä½•æ—¶é€‰æ‹©ï¼Ÿ**
1. **é€‰ `SizedBox` å½“**ï¼š
   - åªéœ€è®¾ç½®å›ºå®šå°ºå¯¸ï¼ˆå¦‚åˆ†éš”é—´è·ï¼‰
   - å¼ºåˆ¶å­ç»„ä»¶ä¿æŒç‰¹å®šå¤§å°
   - éœ€è¦è½»é‡çº§å ä½ç©ºç™½åŒºåŸŸ
   - æ€§èƒ½æ•æ„ŸåŒºåŸŸï¼ˆå¦‚åˆ—è¡¨é¡¹ï¼‰

2. **é€‰ `Container` å½“**ï¼š
   - éœ€è¦èƒŒæ™¯è‰²/è¾¹æ¡†/é˜´å½±ç­‰è§†è§‰æ•ˆæœ
   - éœ€è¦åŒæ—¶æ§åˆ¶ padding å’Œ margin
   - éœ€è¦å˜æ¢æˆ–å¤æ‚å¯¹é½
   - ä½œä¸ºç»„åˆå¸ƒå±€çš„æ ¹å®¹å™¨

---

### âš ï¸ **é‡è¦æ³¨æ„äº‹é¡¹**
```dart
// å±é™©ï¼Container ä¸è®¾ç½®å°ºå¯¸æ—¶å¯èƒ½æ— é™æ‰©å±•
Container(color: Colors.red) // åœ¨æ— é™ç©ºé—´ä¸­ä¼šå¡«æ»¡æ•´ä¸ªå±å¹•

// SizedBox æ›´å®‰å…¨ï¼ˆæ˜ç¡®çº¦æŸï¼‰
SizedBox.expand(child: ...) // æ˜ç¡®æ‰©å±•è¡Œä¸º
```

> ğŸ’¡ **è®¾è®¡å»ºè®®**ï¼šä¼˜å…ˆä½¿ç”¨ `SizedBox` å¤„ç†çº¯å°ºå¯¸éœ€æ±‚ï¼Œä»…åœ¨éœ€è¦è§†è§‰è£…é¥°æ—¶ä½¿ç”¨ `Container`ã€‚ä¸¤è€…å¸¸ç»„åˆä½¿ç”¨ï¼š
> ```dart
> Container(
>   padding: EdgeInsets.all(16),
>   child: SizedBox(width: 100, height: 100, child: ...)
> )
> ```

## äºŒã€ListView

---

### **1. ç®€å•çº¿æ€§åˆ—è¡¨å±•ç¤º**
- **åœºæ™¯**ï¼šé™æ€æˆ–åŠ¨æ€æ•°æ®åˆ—è¡¨ï¼ˆå¦‚è®¾ç½®èœå•ã€æ¶ˆæ¯åˆ—è¡¨ã€è”ç³»äººï¼‰ã€‚
- **åŸå› **ï¼š  
  `ListView` è‡ªåŠ¨å¤„ç†æ»šåŠ¨ï¼Œæ— éœ€æ‰‹åŠ¨è®¡ç®—å¸ƒå±€ï¼Œé€‚åˆå•åˆ—å‚ç›´/æ°´å¹³å¸ƒå±€ã€‚
- **ç¤ºä¾‹**ï¼š
  ```dart
  ListView(
    children: [
      ListTile(title: Text("è®¾ç½®")),
      ListTile(title: Text("éšç§æ”¿ç­–")),
      ListTile(title: Text("é€€å‡ºç™»å½•")),
    ],
  )
  ```

---

* **`ListView` æ˜¯åˆ—è¡¨å®¹å™¨**ï¼šè´Ÿè´£æ»šåŠ¨ã€åˆ—è¡¨å¸ƒå±€ã€‚
* **`ListTile` æ˜¯åˆ—è¡¨é¡¹æ§ä»¶**ï¼šç”¨äºå±•ç¤ºæ¯ä¸€è¡Œçš„å†…å®¹ï¼ˆå¸¸è§äºè®¾ç½®é¡¹ã€è”ç³»äººç­‰ï¼‰ã€‚

---

## ğŸ§± ç»“æ„å¯¹æ¯”

| é¡¹ç›®      | ListView                    | ListTile             |
| ------- | --------------------------- | -------------------- |
| æ˜¯ä»€ä¹ˆ     | åˆ—è¡¨å®¹å™¨ï¼Œæ”¯æŒæ»šåŠ¨                   | å•ä¸ªåˆ—è¡¨é¡¹ï¼ŒåŒ…å«å¸¸è§çš„å¸ƒå±€ç»“æ„      |
| ç”¨é€”      | ç®¡ç†å¤šä¸ªå­ç»„ä»¶å¹¶æä¾›æ»šåŠ¨èƒ½åŠ›              | æ˜¾ç¤ºä¸€é¡¹å†…å®¹ï¼šæ ‡é¢˜ã€å›¾æ ‡ã€è¯´æ˜ã€ç®­å¤´ç­‰  |
| å¸¸è§ç”¨æ³•    | åŒ…è£¹ `ListTile`ã€`Container` ç­‰ | æ”¾åœ¨ `ListView` çš„å­é¡¹ä¸­ä½¿ç”¨ |
| æ˜¯å¦å¯ç‚¹å‡»   | âŒï¼ˆé™¤éæ‰‹åŠ¨åŒ…è£¹ `GestureDetector`ï¼‰ | âœ…ï¼ˆå†…ç½®ç‚¹å‡»äº‹ä»¶ `onTap`ï¼‰    |
| æ˜¯å¦å¸¦è¾¹è·æ’ç‰ˆ | âŒï¼ˆé»˜è®¤æ— ï¼‰                      | âœ…ï¼ˆå†…ç½®æ ‡å‡† paddingsï¼‰     |

---

## ğŸ“¦ ç¤ºä¾‹ï¼šListView + ListTile æ­é…ä½¿ç”¨

```dart
ListView(
  children: [
    ListTile(
      leading: Icon(Icons.person),
      title: Text('è”ç³»äºº A'),
      subtitle: Text('ç”µè¯: 123456'),
      trailing: Icon(Icons.arrow_forward_ios),
      onTap: () {
        print("ç‚¹å‡»äº†è”ç³»äºº A");
      },
    ),
    ListTile(
      leading: Icon(Icons.person),
      title: Text('è”ç³»äºº B'),
    ),
  ],
)
```

---

## âœ… ListTile ç»“æ„è¯´æ˜

| åŒºåŸŸ   | å±æ€§å           | è¯´æ˜         |
| ---- | ------------- | ---------- |
| å·¦ä¾§å›¾æ ‡ | `leading`     | é€šå¸¸æ”¾ç½®å¤´åƒã€å›¾æ ‡ç­‰ |
| ä¸»å†…å®¹  | `title`       | ä¸»è¦æ ‡é¢˜       |
| å‰¯æ ‡é¢˜  | `subtitle`    | æè¿°æˆ–æ¬¡è¦ä¿¡æ¯    |
| å³ä¾§å›¾æ ‡ | `trailing`    | ç®­å¤´ã€æŒ‰é’®ã€çŠ¶æ€ç­‰  |
| ç‚¹å‡»äº‹ä»¶ | `onTap`       | ç‚¹å‡»è§¦å‘æ“ä½œ     |
| é•¿æŒ‰äº‹ä»¶ | `onLongPress` | é•¿æŒ‰è§¦å‘æ“ä½œ     |

---

## ğŸ“Œ ListView çš„å¤šç§æ„é€ æ–¹å¼

| æ„é€ å‡½æ•°                   | ç”¨æ³•è¯´æ˜                     |
| ---------------------- | ------------------------ |
| `ListView()`           | ç›´æ¥ä¼ å…¥ `children: []` é™æ€åˆ—è¡¨ |
| `ListView.builder()`   | åŠ¨æ€æ„å»ºåˆ—è¡¨ï¼Œé€‚åˆå¤§æ•°æ®é‡            |
| `ListView.separated()` | åŠ¨æ€æ„å»º + æ¯é¡¹ä¹‹é—´æœ‰åˆ†éš”çº¿          |

### ç¤ºä¾‹ï¼ˆbuilderï¼‰ï¼š

```dart
ListView.builder(
  itemCount: 100,
  itemBuilder: (context, index) {
    return ListTile(
      title: Text('Item $index'),
    );
  },
)
```

---

## ğŸ§  æ€»ç»“

| ç»„ä»¶         | ç‰¹ç‚¹                  | å¸¸è§æ­é…                           |
| ---------- | ------------------- | ------------------------------ |
| `ListView` | åˆ—è¡¨å®¹å™¨ï¼Œå¯æ»šåŠ¨ï¼Œæ”¯æŒåŠ¨æ€åŠ è½½     | `ListTile`, `Container`, è‡ªå®šä¹‰ç»„ä»¶ |
| `ListTile` | å•é¡¹ç»„ä»¶ï¼Œå†…ç½®å›¾æ ‡/æ ‡é¢˜/å‰¯æ ‡é¢˜/ç®­å¤´ | æ”¾åœ¨ `ListView` çš„å­ç»„ä»¶ä¸­            |

---



### **2. é•¿åˆ—è¡¨æ•°æ®ï¼ˆåŠ¨æ€åŠ è½½ï¼‰**
- **åœºæ™¯**ï¼šæ•°æ®é‡è¾ƒå¤§ï¼ˆå¦‚æ–°é—»æµã€å•†å“åˆ—è¡¨ã€ç¤¾äº¤åª’ä½“åŠ¨æ€ï¼‰ã€‚
- **åŸå› **ï¼š  
  é€šè¿‡ `ListView.builder` **æŒ‰éœ€æ„å»ºå­é¡¹**ï¼Œé¿å…ä¸€æ¬¡æ€§æ¸²æŸ“å…¨éƒ¨å†…å®¹ï¼Œå¤§å¹…æå‡æ€§èƒ½ã€‚
- **ç¤ºä¾‹**ï¼š
  ```dart
  ListView.builder(
    itemCount: 1000, // æ•°æ®æ€»é‡
    itemBuilder: (context, index) {
      return ListTile(title: Text("ç¬¬ $index æ¡æ•°æ®"));
    },
  )
  ```

---

### **3. åˆ—è¡¨é¡¹é—´éœ€è¦åˆ†éš”çº¿**
- **åœºæ™¯**ï¼šéœ€è¦è§†è§‰åˆ†éš”çš„åˆ—è¡¨ï¼ˆå¦‚è®¾ç½®é¡¹ã€åˆ†ç»„åˆ—è¡¨ï¼‰ã€‚
- **åŸå› **ï¼š  
  `ListView.separated` å¯è‡ªå®šä¹‰åˆ†éš”çº¿æ ·å¼ï¼ˆå¦‚ `Divider`ï¼‰ã€‚
- **ç¤ºä¾‹**ï¼š
  ```dart
  ListView.separated(
    itemCount: 20,
    separatorBuilder: (_, __) => Divider(height: 1), // åˆ†éš”çº¿
    itemBuilder: (context, index) => ListTile(title: Text("é¡¹ç›® $index")),
  )
  ```

---

### **4. å›ºå®šé«˜åº¦åˆ—è¡¨ä¼˜åŒ–**
- **åœºæ™¯**ï¼šæ‰€æœ‰åˆ—è¡¨é¡¹é«˜åº¦ä¸€è‡´ï¼ˆå¦‚è¡¨æ ¼è¡Œã€æ ‡å‡†åŒ–å¡ç‰‡ï¼‰ã€‚
- **åŸå› **ï¼š  
  é€šè¿‡ `itemExtent` æŒ‡å®šå›ºå®šé«˜åº¦ï¼Œé¿å…åŠ¨æ€è®¡ç®—å¼€é”€ï¼Œä¼˜åŒ–æ»šåŠ¨æ€§èƒ½ã€‚
- **ç¤ºä¾‹**ï¼š
  ```dart
  ListView.builder(
    itemExtent: 80, // æ¯ä¸ªåˆ—è¡¨é¡¹å›ºå®šé«˜åº¦ 80
    itemBuilder: (context, index) => Container(height: 80, ...),
  )
  ```

---

### **5. æ°´å¹³æ»šåŠ¨åˆ—è¡¨**
- **åœºæ™¯**ï¼šæ¨ªå‘åˆ—è¡¨ï¼ˆå¦‚å›¾åº“ã€æ¨ªå¹…å¹¿å‘Šã€åˆ†ç±»æ ‡ç­¾ï¼‰ã€‚
- **åŸå› **ï¼š  
  è®¾ç½® `scrollDirection: Axis.horizontal` å³å¯å¿«é€Ÿå®ç°æ°´å¹³æ»šåŠ¨ã€‚
- **ç¤ºä¾‹**ï¼š
  ```dart
  ListView(
    scrollDirection: Axis.horizontal,
    children: [
      Image.network("https://picsum.photos/200"),
      Image.network("https://picsum.photos/201"),
      // æ›´å¤šå›¾ç‰‡...
    ],
  )
  ```

---

### **6. æ‡’åŠ è½½åˆ†é¡µæ•°æ®**
- **åœºæ™¯**ï¼šåˆ†é¡µåŠ è½½æ•°æ®ï¼ˆå¦‚æ»šåŠ¨åˆ°åº•éƒ¨åŠ è½½æ›´å¤šï¼‰ã€‚
- **åŸå› **ï¼š  
  ç»“åˆ `ScrollController` ç›‘å¬æ»šåŠ¨ä½ç½®ï¼Œè§¦å‘åˆ†é¡µé€»è¾‘ã€‚
- **ç¤ºä¾‹**ï¼š
  ```dart
  final controller = ScrollController();
  ListView.builder(
    controller: controller,
    itemBuilder: (context, index) => ItemWidget(data[index]),
  );

  // ç›‘å¬æ»šåŠ¨åˆ°åº•éƒ¨
  controller.addListener(() {
    if (controller.position.pixels == controller.position.maxScrollExtent) {
      loadMoreData(); // åŠ è½½æ›´å¤š
    }
  });
  ```

---

### **7. åµŒå¥—æ»šåŠ¨è§†å›¾**
- **åœºæ™¯**ï¼šå¤æ‚å¸ƒå±€ï¼ˆå¦‚å¤´éƒ¨ Banner + åˆ—è¡¨ã€ä¸‹æ‹‰åˆ·æ–°ï¼‰ã€‚
- **åŸå› **ï¼š  
  `ListView` å¯ä¸ `CustomScrollView` + `SliverList` é…åˆï¼Œå®ç°åµŒå¥—æ»šåŠ¨ã€‚
- **ç¤ºä¾‹**ï¼š
  ```dart
  CustomScrollView(
    slivers: [
      SliverAppBar(title: Text("å•†å“åˆ—è¡¨")),
      SliverList(
        delegate: SliverChildBuilderDelegate(
          (_, index) => ListTile(title: Text("å•†å“ $index")),
        ),
      ),
    ],
  )
  ```

---

### **ä½•æ—¶é¿å…ä½¿ç”¨ **
1. **ç½‘æ ¼å¸ƒå±€** â†’ æ”¹ç”¨ `GridView`ã€‚
2. **ç€‘å¸ƒæµå¸ƒå±€** â†’ æ”¹ç”¨ `GridView.custom` æˆ–ç¬¬ä¸‰æ–¹åº“ï¼ˆå¦‚ `flutter_staggered_grid_view`ï¼‰ã€‚
3. **å•é¡µæ— æ»šåŠ¨å†…å®¹** â†’ ç›´æ¥ä½¿ç”¨ `Column` æˆ– `Row`ã€‚
4. **å¤æ‚æ‡’åŠ è½½æ§åˆ¶** â†’ è€ƒè™‘ `CustomScrollView` + `Slivers` æ›´çµæ´»ã€‚

---

### **æ€»ç»“**
| **åœºæ™¯ç‰¹ç‚¹**               | **æ¨è ListView ç±»å‹**     |
|---------------------------|----------------------------|
| å°‘é‡é™æ€åˆ—è¡¨               | `ListView(children: [...])` |
| é•¿åˆ—è¡¨/åŠ¨æ€æ•°æ®            | `ListView.builder`         |
| éœ€è¦åˆ†éš”çº¿                 | `ListView.separated`       |
| æ°´å¹³æ»šåŠ¨                  | `ListView(scrollDirection: Axis.horizontal)` |

æ ¹æ®éœ€æ±‚é€‰æ‹©åˆé€‚æ„é€ å‡½æ•°ï¼Œç»“åˆ `ScrollController`ã€`RefreshIndicator` ç­‰å¯æ»¡è¶³ç»å¤§å¤šæ•°åˆ—è¡¨äº¤äº’éœ€æ±‚ã€‚
åœ¨ Flutter ä¸­ï¼Œ`ScrollController` å’Œ `RefreshIndicator` æ˜¯ä¸¤ä¸ªå¼ºå¤§çš„æ»šåŠ¨ç›¸å…³ç»„ä»¶ï¼Œå®ƒä»¬å¯ä»¥ååŒå·¥ä½œæ¥å®ç°**ä¸‹æ‹‰åˆ·æ–°**å’Œ**æ»šåŠ¨æ§åˆ¶**åŠŸèƒ½ã€‚ä»¥ä¸‹æ˜¯å®ƒä»¬çš„é…åˆä½¿ç”¨æ–¹æ³•å’Œæœ€ä½³å®è·µï¼š

---

## ä¸‰ã€æ— çº¿æ»šåŠ¨ä»¥åŠä¸Šæ‹‰åŠ è½½

### ğŸ“œ æ ¸å¿ƒæ¦‚å¿µ
| **ç»„ä»¶**          | **ä½œç”¨**                                                                 |
|-------------------|-------------------------------------------------------------------------|
| `ScrollController` | æ§åˆ¶æ»šåŠ¨ä½ç½®ï¼Œç›‘å¬æ»šåŠ¨äº‹ä»¶ï¼Œå®ç°æ»šåŠ¨åˆ°æŒ‡å®šä½ç½®ã€æ— é™æ»šåŠ¨ç­‰åŠŸèƒ½               |
| `RefreshIndicator` | Material Design é£æ ¼çš„ä¸‹æ‹‰åˆ·æ–°ç»„ä»¶ï¼Œæä¾›è§†è§‰åé¦ˆå’Œåˆ·æ–°å›è°ƒ                 |

---

### ğŸ§© åŸºæœ¬é…åˆæ–¹å¼
```dart
class RefreshableList extends StatefulWidget {
  @override
  _RefreshableListState createState() => _RefreshableListState();
}

class _RefreshableListState extends State<RefreshableList> {
  final ScrollController _scrollController = ScrollController();
  List<String> _items = [];
  bool _isLoading = false;

  @override
  void initState() {
    super.initState();
    _loadInitialData();
    
    // ç›‘å¬æ»šåŠ¨äº‹ä»¶ï¼ˆç”¨äºåŠ è½½æ›´å¤šï¼‰
    _scrollController.addListener(_scrollListener);
  }

  @override
  void dispose() {
    _scrollController.dispose(); // å¿…é¡»é”€æ¯æ§åˆ¶å™¨
    super.dispose();
  }

  // æ»šåŠ¨ç›‘å¬ - æ£€æµ‹æ˜¯å¦æ»šåŠ¨åˆ°åº•éƒ¨
  void _scrollListener() {
    if (_scrollController.position.pixels == 
        _scrollController.position.maxScrollExtent) {
      _loadMoreData();
    }
  }

  // ä¸‹æ‹‰åˆ·æ–°å›è°ƒ
  Future<void> _handleRefresh() async {
    await Future.delayed(Duration(seconds: 2)); // æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚
    setState(() {
      _items = List.generate(20, (i) => "åˆ·æ–°é¡¹ç›® ${i + 1}");
    });
  }

  // åŠ è½½æ›´å¤šæ•°æ®
  void _loadMoreData() {
    if (_isLoading) return;
    
    setState(() => _isLoading = true);
    
    Future.delayed(Duration(seconds: 2), () {
      setState(() {
        _items.addAll(List.generate(10, (i) => "æ–°é¡¹ç›® ${_items.length + i + 1}"));
        _isLoading = false;
      });
    });
  }

  @override
  Widget build(BuildContext context) {
    return RefreshIndicator(
      onRefresh: _handleRefresh, // ç»‘å®šåˆ·æ–°å›è°ƒ
      child: ListView.builder(
        controller: _scrollController, // ç»‘å®šæ§åˆ¶å™¨
        physics: const AlwaysScrollableScrollPhysics(), // å¿…é¡»è®¾ç½®
        itemCount: _items.length + (_isLoading ? 1 : 0),
        itemBuilder: (context, index) {
          if (index >= _items.length) {
            return Center(child: CircularProgressIndicator());
          }
          return ListTile(title: Text(_items[index]));
        },
      ),
    );
  }
}
```

---

### ğŸ”§ å…³é”®é…ç½®è¯´æ˜

#### 1. `RefreshIndicator` çš„å¿…è¦è®¾ç½®
```dart
RefreshIndicator(
  onRefresh: () async { /* åˆ·æ–°é€»è¾‘ */ },
  child: ListView(
    physics: AlwaysScrollableScrollPhysics(), // å…³é”®ï¼å…è®¸å§‹ç»ˆæ»šåŠ¨
    // ...
  ),
)
```

#### 2. `ScrollController` çš„æ ¸å¿ƒç”¨æ³•
```dart
// ç›‘å¬æ»šåŠ¨
_scrollController.addListener(() {
  // æ˜¯å¦æ»šåŠ¨åˆ°åº•éƒ¨
  if (_scrollController.position.atEdge && 
      _scrollController.position.pixels != 0) {
    _loadMore();
  }
});

// è·³è½¬åˆ°æŒ‡å®šä½ç½®
_scrollController.animateTo(
  500, 
  duration: Duration(seconds: 1), 
  curve: Curves.easeInOut
);

// è·å–æ»šåŠ¨ä¿¡æ¯
double position = _scrollController.position.pixels;
bool isAtBottom = _scrollController.position.atEdge;
```

---

### ğŸš€ é«˜çº§åŠŸèƒ½å®ç°

#### 1. è‡ªå®šä¹‰åˆ·æ–°æŒ‡ç¤ºå™¨æ ·å¼
```dart
RefreshIndicator(
  color: Colors.blue,          // è¿›åº¦æŒ‡ç¤ºå™¨é¢œè‰²
  backgroundColor: Colors.white, // èƒŒæ™¯è‰²
  displacement: 40.0,           // è§¦å‘åˆ·æ–°çš„ä¸‹æ‹‰è·ç¦»
  strokeWidth: 3.0,             // è¿›åº¦æ¡ç²—ç»†
  onRefresh: _handleRefresh,
  child: // ...
)
```

#### 2. å¤æ‚æ»šåŠ¨æ§åˆ¶ï¼ˆç»„åˆä½¿ç”¨ï¼‰
```dart
// æ»šåŠ¨åˆ°é¡¶éƒ¨æ—¶è‡ªåŠ¨åˆ·æ–°
_scrollController.addListener(() {
  if (_scrollController.position.pixels == 0 && 
      !_scrollController.position.outOfRange) {
    _handleRefresh();
  }
});

// è·³è½¬åˆ°ä¸Šæ¬¡é˜…è¯»ä½ç½®
void _restorePosition() {
  final savedPosition = _getSavedPosition();
  WidgetsBinding.instance.addPostFrameCallback((_) {
    _scrollController.jumpTo(savedPosition);
  });
}
```

#### 3. ä¸åŠ¨ç”»ç»“åˆ
```dart
// æ»šåŠ¨æ—¶æ˜¾ç¤º/éšè—æŒ‰é’®
bool _showScrollToTop = false;

_scrollController.addListener(() {
  final show = _scrollController.offset > 500;
  if (show != _showScrollToTop) {
    setState(() => _showScrollToTop = show);
  }
});

// æµ®åŠ¨æŒ‰é’®
AnimatedOpacity(
  opacity: _showScrollToTop ? 1.0 : 0.0,
  child: FloatingActionButton(
    onPressed: () => _scrollController.animateTo(0, /*...*/),
    child: Icon(Icons.arrow_upward),
  ),
)
```

---

### âš ï¸ å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

#### é—®é¢˜ 1ï¼šä¸‹æ‹‰åˆ·æ–°ä¸è§¦å‘
**åŸå› **ï¼šå­ç»„ä»¶æœªè®¾ç½®æ­£ç¡®çš„ `physics`  
**è§£å†³**ï¼š
```dart
ListView(
  physics: AlwaysScrollableScrollPhysics(), // âœ… å¿…é¡»è®¾ç½®
)
```

#### é—®é¢˜ 2ï¼šåŠ è½½æ›´å¤šå¤šæ¬¡è§¦å‘
**è§£å†³**ï¼šæ·»åŠ é˜²æŠ–æ ‡å¿—
```dart
void _scrollListener() {
  if (_isLoading) return; // é˜²æ­¢é‡å¤åŠ è½½
  
  if (_scrollController.position.pixels >
      _scrollController.position.maxScrollExtent - 200) {
    _loadMore();
  }
}
```

#### é—®é¢˜ 3ï¼šæ§åˆ¶å™¨æœªæ­£ç¡®é”€æ¯
**è§£å†³**ï¼šåœ¨ `dispose()` ä¸­é‡Šæ”¾
```dart
@override
void dispose() {
  _scrollController.dispose(); // å¿…é¡»è°ƒç”¨
  super.dispose();
}
```

---

### ğŸŒŸ æœ€ä½³å®è·µ

#### 1. æ€§èƒ½ä¼˜åŒ–
```dart
ListView.builder( // âœ… ä½¿ç”¨builderä¼˜åŒ–é•¿åˆ—è¡¨
  itemBuilder: (context, index) {
    return ItemWidget(
      item: _items[index],
      key: ValueKey(_items[index].id), // ä½¿ç”¨keyæé«˜æ€§èƒ½
    );
  },
)
```

#### 2. çŠ¶æ€ç®¡ç†
```dart
// ä½¿ç”¨RefreshControllerï¼ˆç¬¬ä¸‰æ–¹åº“æä¾›æ›´å¤šåŠŸèƒ½ï¼‰
final _refreshController = RefreshController();

RefreshIndicator(
  onRefresh: () async {
    await _fetchData();
    _refreshController.refreshCompleted(); // é€šçŸ¥å®Œæˆ
  },
  child: SmartRefresher( // ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“å¦‚pull_to_refresh
    controller: _refreshController,
    enablePullUp: true,
    onLoading: () => _loadMore(),
    child: ListView(...),
  ),
)
```

#### 3. é”™è¯¯å¤„ç†
```dart
Future<void> _handleRefresh() async {
  try {
    final data = await api.fetchData();
    setState(() => _items = data);
  } catch (e) {
    ScaffoldMessenger.of(context).showSnackBar(
      SnackBar(content: Text("åˆ·æ–°å¤±è´¥: $e"))
    );
    
    // é‡è¦ï¼šå¿…é¡»å®Œæˆåˆ·æ–°å¾ªç¯
    return Future.error(e);
  }
}
```

---

### ğŸ“± å®Œæ•´ç¤ºä¾‹ï¼ˆä¸‹æ‹‰åˆ·æ–° + åŠ è½½æ›´å¤šï¼‰
```dart
class AdvancedRefreshList extends StatefulWidget {
  @override
  _AdvancedRefreshListState createState() => _AdvancedRefreshListState();
}

class _AdvancedRefreshListState extends State<AdvancedRefreshList> {
  final ScrollController _controller = ScrollController();
  final List<String> _items = [];
  bool _isLoading = false, _hasMore = true;

  @override
  void initState() {
    super.initState();
    _loadInitialData();
    _controller.addListener(_scrollListener);
  }

  void _scrollListener() {
    if (_controller.position.pixels > 
        _controller.position.maxScrollExtent - 200 &&
        !_isLoading && _hasMore) {
      _loadMoreData();
    }
  }

  Future<void> _refreshData() async {
    await Future.delayed(Duration(seconds: 2));
    setState(() {
      _items.clear();
      _items.addAll(List.generate(20, (i) => "åˆ·æ–°é¡¹ç›® $i"));
      _hasMore = true;
    });
  }

  void _loadMoreData() {
    if (_isLoading || !_hasMore) return;
    
    setState(() => _isLoading = true);
    
    Future.delayed(Duration(seconds: 2), () {
      if (!mounted) return;
      
      final newItems = List.generate(10, (i) => "é¡¹ç›® ${_items.length + i}");
      
      setState(() {
        _items.addAll(newItems);
        _isLoading = false;
        _hasMore = newItems.length == 10; // æ¨¡æ‹Ÿæ˜¯å¦æœ‰æ›´å¤šæ•°æ®
      });
    });
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: RefreshIndicator(
        onRefresh: _refreshData,
        child: CustomScrollView(
          controller: _controller,
          physics: AlwaysScrollableScrollPhysics(),
          slivers: [
            SliverList(
              delegate: SliverChildBuilderDelegate(
                (_, i) => ListTile(title: Text(_items[i])),
            ),
            if (_isLoading)
              SliverToBoxAdapter(child: Center(child: CircularProgressIndicator())),
            if (!_hasMore)
              SliverToBoxAdapter(child: Center(child: Text("æ²¡æœ‰æ›´å¤šæ•°æ®äº†")))
          ],
        ),
      ),
      floatingActionButton: FloatingActionButton(
        onPressed: () => _controller.animateTo(0, /*...*/),
        child: Icon(Icons.vertical_align_top),
      ),
    );
  }
}
```

---

### æ€»ç»“è¦ç‚¹
1. **æ ¸å¿ƒç»„åˆ**ï¼š
   - `RefreshIndicator` å¤„ç†ä¸‹æ‹‰åˆ·æ–°
   - `ScrollController` æ§åˆ¶æ»šåŠ¨ä½ç½®å’ŒåŠ è½½æ›´å¤š

2. **å¿…è¦é…ç½®**ï¼š
   ```dart
   physics: AlwaysScrollableScrollPhysics() // å…è®¸ä¸‹æ‹‰
   controller: _scrollController           // ç»‘å®šæ§åˆ¶å™¨
   ```

3. **ç”Ÿå‘½å‘¨æœŸç®¡ç†**ï¼š
   ```dart
   initState() â†’ åˆ›å»ºæ§åˆ¶å™¨ + æ·»åŠ ç›‘å¬
   dispose() â†’ é”€æ¯æ§åˆ¶å™¨
   ```

4. **é«˜çº§æŠ€å·§**ï¼š
   - ä½¿ç”¨ `Sliver` æ„å»ºå¤æ‚æ»šåŠ¨å¸ƒå±€
   - ç»“åˆ `AnimationController` å®ç°æ»šåŠ¨åŠ¨ç”»
   - ä½¿ç”¨ `NotificationListener` ç›‘å¬æ»šåŠ¨äº‹ä»¶

è¿™ç§ç»„åˆæ–¹å¼éå¸¸é€‚åˆå®ç°ç¤¾äº¤åŠ¨æ€æµã€æ–°é—»åˆ—è¡¨ã€å•†å“åˆ—è¡¨ç­‰éœ€è¦ä¸‹æ‹‰åˆ·æ–°å’Œæ»šåŠ¨åŠ è½½çš„åœºæ™¯ã€‚



åœ¨ Flutter ä¸­ï¼Œ`Stack + Positioned` å’Œ `Overlay` éƒ½å¯ä»¥å®ç°â€œè¦†ç›–å¼â€çš„ UI å¸ƒå±€æ•ˆæœï¼ˆä¾‹å¦‚å¼¹çª—ã€æµ®å±‚ã€æ°”æ³¡æç¤ºç­‰ï¼‰ï¼Œä½†å®ƒä»¬çš„å·¥ä½œåŸç†ã€ä½¿ç”¨åœºæ™¯å’Œç”Ÿå‘½å‘¨æœŸæœºåˆ¶ä¸åŒã€‚

---

## âœ… ä¸€å¼ å›¾å¿«é€Ÿç†è§£åŒºåˆ«

```
Stack + Positioned         |         Overlay
---------------------------------------------------------
åªåœ¨å½“å‰ widget æ ‘ä¸­å¯è§         |  å…¨å±€æ‚¬æµ®ï¼Œå¯è·¨ widget tree
å¸ƒå±€èŒƒå›´å—é™äºçˆ¶ widget          |  å¸ƒå±€ä¸å—é™ï¼Œå¯å…¨å±é®ç½©
é€šå¸¸ç”¨äºå±€éƒ¨å±‚å å¸ƒå±€            |  é€šå¸¸ç”¨äºå…¨å±€æµ®å±‚ï¼ˆå¦‚å¼¹çª—ã€Toastï¼‰
ç”Ÿå‘½å‘¨æœŸè·Ÿéš widget æ ‘         |  ç‹¬ç«‹ç”Ÿå‘½å‘¨æœŸï¼Œæ‰‹åŠ¨æ§åˆ¶æ˜¾ç¤º/éšè—
ä½¿ç”¨ç®€å•ï¼ˆæ›´åƒé™æ€å¸ƒå±€ï¼‰        |  æ›´çµæ´»ï¼ˆæ”¯æŒåŠ¨æ€æ·»åŠ /ç§»é™¤ï¼‰
```

---

## å››ã€å±‚å å¸ƒå±€

### ğŸ“Œ ç®€ä»‹

`Stack` å…è®¸ä½ å°†å­ç»„ä»¶â€œå †å â€åœ¨ä¸€èµ·ï¼Œ`Positioned` æ§åˆ¶æ¯ä¸ªå­ç»„ä»¶çš„ä½ç½®ã€‚
**ä½¿ç”¨stackå¿…é¡»è¦æ”¾åœ¨å®¹å™¨é‡Œ è¦ä¹ˆæ”¾åœ¨æ ¹ç»„ä»¶**

### âœ… ç‰¹ç‚¹

* é€‚åˆ**å±€éƒ¨é¡µé¢å¸ƒå±€**ï¼ˆå¦‚å¡ç‰‡å åŠ ã€å¤´åƒè§’æ ‡ç­‰ï¼‰ã€‚
* å—é™äº `Stack` çš„è¾¹ç•Œã€‚
* å­ç»„ä»¶å’Œçˆ¶ç»„ä»¶ä¸€èµ·æ¸²æŸ“å’Œé”€æ¯ã€‚

### ğŸ§© ç¤ºä¾‹

```dart
Stack(
  children: [
    Container(width: 200, height: 200, color: Colors.blue),
    Positioned(
      top: 10,
      right: 10,
      child: Icon(Icons.star, color: Colors.yellow),
    ),
  ],
)
```

---

## äºŒã€Overlay

### ğŸ“Œ ç®€ä»‹

`Overlay` æ˜¯ Flutter æä¾›çš„**å…¨å±€æ‚¬æµ®å±‚ç³»ç»Ÿ**ï¼Œå¸¸ç”¨äºå¼¹çª—ã€æ°”æ³¡æç¤ºã€å¼•å¯¼æµ®å±‚ç­‰éœ€è¦è„±ç¦»å½“å‰ widget å±‚çº§çš„å†…å®¹ã€‚

### âœ… ç‰¹ç‚¹

* é€‚åˆ**å…¨å±€æµ®å±‚æ˜¾ç¤º**ã€‚
* ä¸å— widget æ ‘å¸ƒå±€é™åˆ¶ï¼Œå¯ä»¥ç›–åœ¨æœ€é¡¶å±‚ã€‚
* åŠ¨æ€æ·»åŠ /ç§»é™¤ï¼Œæ”¯æŒåŠ¨ç”»ã€ç”Ÿå‘½å‘¨æœŸæ§åˆ¶ã€‚
* `OverlayEntry` æ˜¯å®ƒçš„æ ¸å¿ƒã€‚

### ğŸ§© ç¤ºä¾‹

```dart
OverlayEntry entry = OverlayEntry(
  builder: (context) => Positioned(
    top: 100,
    left: 50,
    child: Material(
      color: Colors.transparent,
      child: Text("æˆ‘æ˜¯æµ®å±‚", style: TextStyle(color: Colors.white)),
    ),
  ),
);

// æ’å…¥åˆ° Overlay ä¸­
Overlay.of(context).insert(entry);

// ç§»é™¤æµ®å±‚
entry.remove();
```

---

## ğŸš©ä½¿ç”¨åœºæ™¯å¯¹æ¯”

| ä½¿ç”¨åœºæ™¯                      | Stack + Positioned | Overlay |
| ------------------------- | ------------------ | ------- |
| å¡ç‰‡å åŠ å¸ƒå±€                    | âœ…                  | âŒ       |
| é¡µé¢å†…å±€éƒ¨æµ®å±‚                   | âœ…                  | âœ…ï¼ˆç•¥é‡ï¼‰   |
| è‡ªå®šä¹‰å¼¹çª—/èœå•                  | âŒï¼ˆå—é™ï¼‰              | âœ…       |
| å¼•å¯¼é¡µ/æ°”æ³¡æç¤º                  | âŒ                  | âœ…       |
| Floating Action Button åŠ¨ç”» | âŒ                  | âœ…       |

---

## ğŸ” æ€»ç»“ä¸€å¥è¯

> **`Stack + Positioned` æ›´é€‚åˆâ€œé™æ€+å±€éƒ¨â€å¸ƒå±€ï¼Œ`Overlay` æ›´é€‚åˆâ€œåŠ¨æ€+å…¨å±€â€æ‚¬æµ®å†…å®¹ã€‚**

---

## äº”ã€`Row` å’Œ `Column`

---

## âœ… æ€»ä½“æ¦‚å¿µ

| ç»„ä»¶       | ä½œç”¨      | æ–¹å‘         |
| -------- | ------- | ---------- |
| `Row`    | æ¨ªå‘æ’åˆ—å­ç»„ä»¶ | ä¸»è½´æ˜¯ **æ¨ªå‘** |
| `Column` | çºµå‘æ’åˆ—å­ç»„ä»¶ | ä¸»è½´æ˜¯ **çºµå‘** |

è¿™ä¸¤ä¸ªç»„ä»¶å‡ ä¹ç»“æ„ä¸€æ ·ï¼Œåªæ˜¯ä¸»è½´æ–¹å‘ä¸åŒã€‚

---

## ğŸ§± Row / Column åŸºæœ¬ç»“æ„

```dart
Row(
  mainAxisAlignment: MainAxisAlignment.center,   // ä¸»è½´å¯¹é½æ–¹å¼
  crossAxisAlignment: CrossAxisAlignment.center, // äº¤å‰è½´å¯¹é½æ–¹å¼
  children: [
    Text('A'),
    Text('B'),
    Text('C'),
  ],
);
```

---

## âš™ï¸ å±æ€§è¯¦è§£

### 1. `children`

* å¿…å¡«ï¼Œç±»å‹æ˜¯ `List<Widget>`ã€‚
* è¡¨ç¤ºä¸€ç»„å­ç»„ä»¶ï¼ŒæŒ‰ä¸»è½´æ–¹å‘æ’åˆ—ã€‚

---

### 2. `mainAxisAlignment`ï¼ˆä¸»è½´å¯¹é½æ–¹å¼ï¼‰

| æšä¸¾å€¼            | æ•ˆæœç¤ºæ„                 |
| -------------- | -------------------- |
| `start`        | ä»èµ·ç‚¹å¼€å§‹å¯¹é½ï¼ˆå·¦/ä¸Šï¼‰         |
| `end`          | ä»ç»ˆç‚¹å¼€å§‹å¯¹é½ï¼ˆå³/ä¸‹ï¼‰         |
| `center`       | å±…ä¸­                   |
| `spaceBetween` | ä¸¤ç«¯å¯¹é½ï¼Œä¸­é—´å¹³åˆ†            |
| `spaceAround`  | æ¯ä¸ªç»„ä»¶å‰åé—´è·ä¸€è‡´ï¼Œä¸¤è¾¹é—´è·ä¸ºä¸­é—´ä¸€åŠ |
| `spaceEvenly`  | æ‰€æœ‰ç»„ä»¶é—´è·å‡ç­‰             |

---

### 3. `crossAxisAlignment`ï¼ˆäº¤å‰è½´å¯¹é½æ–¹å¼ï¼‰

| æšä¸¾å€¼               | è¡Œä¸º                        |
| ----------------- | ------------------------- |
| `start`           | é¡¶éƒ¨ï¼ˆRowï¼‰/ å·¦ä¾§ï¼ˆColumnï¼‰å¯¹é½     |
| `end`             | åº•éƒ¨ï¼ˆRowï¼‰/ å³ä¾§ï¼ˆColumnï¼‰å¯¹é½     |
| `center`          | å±…ä¸­å¯¹é½                      |
| `stretch`         | æ‹‰ä¼¸ï¼ˆå¿…é¡»é…åˆ `Expanded` æˆ–æŒ‡å®šé«˜åº¦ï¼‰ |
| `baseline`ï¼ˆä»… Rowï¼‰ | åŸºçº¿å¯¹é½ï¼ˆè¦æ±‚æ–‡æœ¬æ‰æœ‰æ•ˆï¼‰             |

---

### 4. `mainAxisSize`

| æšä¸¾å€¼                | æè¿°                       |
| ------------------ | ------------------------ |
| `MainAxisSize.max` | é»˜è®¤å€¼ï¼Œå æ»¡ä¸»è½´æœ€å¤§ç©ºé—´             |
| `MainAxisSize.min` | ä»…æ ¹æ® `children` å¤§å°æ¥å†³å®šä¸»è½´é•¿åº¦ |

---

## ğŸ§© ç¤ºä¾‹å¯¹æ¯”ï¼šRow vs Column

### `Row` ç¤ºä¾‹ï¼ˆæ°´å¹³å±…ä¸­ï¼‰

```dart
Row(
  mainAxisAlignment: MainAxisAlignment.center,
  children: [
    Icon(Icons.star),
    Icon(Icons.star),
    Icon(Icons.star),
  ],
)
```

### `Column` ç¤ºä¾‹ï¼ˆå‚ç›´é ä¸‹ï¼‰

```dart
Column(
  mainAxisAlignment: MainAxisAlignment.end,
  children: [
    Text('Hello'),
    Text('Flutter'),
  ],
)
```

---

## ğŸ“¦ å¸¸ä¸ Row/Column æ­é…çš„ç»„ä»¶

| ç»„ä»¶å        | ç”¨é€”                                    |
| ---------- | ------------------------------------- |
| `Expanded` | å­é¡¹è‡ªåŠ¨å¡«æ»¡å‰©ä½™ç©ºé—´                            |
| `Flexible` | å¯æ§åˆ¶å¼¹æ€§æ¯”ï¼Œä½†ä¸å¼ºåˆ¶æ’‘æ»¡ç©ºé—´                       |
| `Spacer`   | å¡«å……ç©ºéš™ï¼Œç±»ä¼¼ `Expanded(child: SizedBox())` |
| `SizedBox` | æ§åˆ¶å®½é«˜çš„ç©ºç›’å­                              |
| `Align`    | æ‰‹åŠ¨å¯¹å­ç»„ä»¶è¿›è¡Œå¯¹é½                            |
| `Padding`  | è®¾ç½®å†…è¾¹è·                                 |

---

## ğŸ¯ å¸¸è§ç”¨æ³•ä¸¾ä¾‹

### 1. `Row + Expanded`ï¼šå¹³åˆ†å®½åº¦

```dart
Row(
  children: [
    Expanded(child: Container(color: Colors.red)),
    Expanded(child: Container(color: Colors.green)),
    Expanded(child: Container(color: Colors.blue)),
  ],
)
```

---

### 2. `Column + crossAxisAlignment.stretch`ï¼šæ‹‰ä¼¸å­ç»„ä»¶å®½åº¦

```dart
Column(
  crossAxisAlignment: CrossAxisAlignment.stretch,
  children: [
    ElevatedButton(onPressed: () {}, child: Text('æŒ‰é’® A')),
    ElevatedButton(onPressed: () {}, child: Text('æŒ‰é’® B')),
  ],
)
```

---

## â— æ³¨æ„äº‹é¡¹

| é—®é¢˜                              | åŸå› æˆ–è§£å†³æ–¹æ¡ˆ                         |
| ------------------------------- | ------------------------------- |
| `Row` ä¸­å†…å®¹æº¢å‡º                     | éœ€è¦ä½¿ç”¨ `Expanded` æˆ– `Flexible` åŒ…è£¹ |
| `Column` æ— æ³•æ»šåŠ¨                   | è¯·ç”¨ `SingleChildScrollView` åŒ…è£¹   |
| ä¸»è½´å¸ƒå±€ä¸ç”Ÿæ•ˆ                         | æ£€æŸ¥çˆ¶å®¹å™¨æ˜¯å¦æœ‰è¶³å¤Ÿç©ºé—´                    |
| `CrossAxisAlignment.stretch` æ— æ•ˆ | å­é¡¹æ²¡æœ‰è®¾ç½®æ˜ç¡®å®½/é«˜                     |

---

## ğŸ”š æ€»ç»“

| å¯¹æ¯”é¡¹    | `Row`                              | `Column`      |
| ------ | ---------------------------------- | ------------- |
| ä¸»è½´æ–¹å‘   | æ¨ªå‘                                 | çºµå‘            |
| å¸¸è§ç”¨é€”   | æ°´å¹³æ’åˆ—æŒ‰é’®ã€å›¾æ ‡ã€å¤´åƒç­‰                      | å‚ç›´æ’åˆ—æ–‡æœ¬ã€è¡¨å•ã€å¡ç‰‡ç­‰ |
| å¸¸è§é—®é¢˜   | å®½åº¦æº¢å‡º                               | é«˜åº¦è¶…å‡ºå¯¼è‡´æ— æ³•æ»šåŠ¨    |
| æ­é…ç»„ä»¶æ¨è | `Expanded`, `Flexible`, `Spacer` ç­‰ |               |

---

## å…­ã€Flexï¼Ÿ
åœ¨ Flutter ä¸­ï¼Œ`Flex` æ˜¯ `Row` å’Œ `Column` çš„åº•å±‚å®ç°ï¼Œæä¾›äº†**ä¸»è½´æ–¹å‘å¯é…ç½®çš„çº¿æ€§å¸ƒå±€èƒ½åŠ›**ã€‚è™½ç„¶æˆ‘ä»¬æ—¥å¸¸å¼€å‘ä¸­å¸¸ç”¨çš„æ˜¯ `Row` å’Œ `Column`ï¼Œä½†ç†è§£å’ŒæŒæ¡ `Flex` å¯ä»¥è®©ä½ åœ¨æŸäº›çµæ´»åœºæ™¯ä¸­æ›´å¥½åœ°æŒæ§å¸ƒå±€è¡Œä¸ºã€‚

---

## âœ… ä»€ä¹ˆæ˜¯ Flexï¼Ÿ

* `Flex` æ˜¯ä¸€ä¸ª**çº¿æ€§å¸ƒå±€å®¹å™¨**ï¼Œå¯ä»¥æ²¿ç€**æ°´å¹³æˆ–å‚ç›´ä¸»è½´**æ’åˆ—å…¶å­ç»„ä»¶ã€‚
* `Row` æ˜¯ `Flex` çš„ä¸€ä¸ªå°è£…ï¼Œä¸»è½´æ–¹å‘å›ºå®šä¸º `Axis.horizontal`ã€‚
* `Column` æ˜¯ `Flex` çš„ä¸€ä¸ªå°è£…ï¼Œä¸»è½´æ–¹å‘å›ºå®šä¸º `Axis.vertical`ã€‚

---

## ğŸ§± åŸºæœ¬è¯­æ³•

```dart
Flex(
  direction: Axis.horizontal, // ä¸»è½´æ–¹å‘ï¼šæ¨ªå‘æˆ–çºµå‘
  mainAxisAlignment: MainAxisAlignment.center,
  crossAxisAlignment: CrossAxisAlignment.center,
  children: [
    Flexible(child: ...),
    Expanded(child: ...),
  ],
)
```

---

## ğŸ”§ æ ¸å¿ƒå±æ€§è¯¦è§£

### 1. `direction`ï¼ˆå¿…éœ€ï¼‰

* å†³å®šä¸»è½´æ–¹å‘ï¼Œæ˜¯ `Flex` ä¸ `Row`/`Column` æœ€å¤§çš„ä¸åŒã€‚
* ç±»å‹ï¼š`Axis.horizontal` æˆ– `Axis.vertical`

```dart
direction: Axis.horizontal // ç±»ä¼¼ Row
direction: Axis.vertical   // ç±»ä¼¼ Column
```

---

### 2. `mainAxisAlignment`ï¼ˆä¸»è½´å¯¹é½ï¼‰

| å€¼              | æè¿°                 |
| -------------- | ------------------ |
| `start`        | ä»ä¸»è½´èµ·å§‹ä½ç½®å¼€å§‹å¸ƒå±€        |
| `end`          | ä»ä¸»è½´æœ«å°¾å¼€å§‹å¸ƒå±€          |
| `center`       | å±…ä¸­å¸ƒå±€               |
| `spaceBetween` | ä¸¤ç«¯å¯¹é½ï¼Œå†…éƒ¨é—´è·ç›¸ç­‰        |
| `spaceAround`  | æ¯ä¸ªå­é¡¹å‰åæœ‰é—´è·ï¼Œä¸¤ç«¯æ˜¯ä¸­é—´çš„ä¸€åŠ |
| `spaceEvenly`  | æ‰€æœ‰é—´è·ç›¸ç­‰             |

---

### 3. `crossAxisAlignment`ï¼ˆäº¤å‰è½´å¯¹é½ï¼‰

| å€¼          | è¯´æ˜                 |
| ---------- | ------------------ |
| `start`    | é¡¶éƒ¨ï¼ˆæ¨ªå‘ï¼‰/ å·¦ä¾§ï¼ˆçºµå‘ï¼‰å¯¹é½   |
| `end`      | åº•éƒ¨ï¼ˆæ¨ªå‘ï¼‰/ å³ä¾§ï¼ˆçºµå‘ï¼‰å¯¹é½   |
| `center`   | å±…ä¸­å¯¹é½               |
| `stretch`  | æ‹‰ä¼¸ï¼ˆé€šå¸¸ç”¨äº Columnï¼‰    |
| `baseline` | åŸºçº¿å¯¹é½ï¼Œä»…é€‚ç”¨äº Row ä¸”æ˜¯æ–‡å­— |

---

### 4. `mainAxisSize`

* æ§åˆ¶ä¸»è½´å¤§å°æ˜¯å¦ç´§å‡‘æˆ–å¡«æ»¡çˆ¶å®¹å™¨

| å€¼         | è¯´æ˜           |
| --------- | ------------ |
| `max`ï¼ˆé»˜è®¤ï¼‰ | å æ»¡ä¸»è½´æ–¹å‘å¯ç”¨ç©ºé—´   |
| `min`     | åªå æ®å†…å®¹æ‰€éœ€çš„æœ€å°ç©ºé—´ |

---

## ğŸ§© Flexible ä¸ Expanded çš„åŒºåˆ«

### âœ… `Expanded`

* æ˜¯ `Flexible` çš„å¿«æ·æ–¹å¼ï¼Œ`flex: 1`ï¼Œå¹¶å¼ºåˆ¶å­ç»„ä»¶æ’‘æ»¡å¯ç”¨ç©ºé—´ã€‚

```dart
Expanded(
  child: Container(color: Colors.blue),
)
```

ç­‰ä»·äºï¼š

```dart
Flexible(
  flex: 1,
  fit: FlexFit.tight,
  child: Container(color: Colors.blue),
)
```

---

### âœ… `Flexible`

* æ›´çµæ´»ï¼Œä¸ä¸€å®šå¡«æ»¡å‰©ä½™ç©ºé—´ï¼Œå–å†³äº `fit` å€¼ã€‚

```dart
Flexible(
  flex: 2,
  fit: FlexFit.loose, // ä¸å¼ºåˆ¶å¡«æ»¡
  child: Container(width: 100, color: Colors.red),
)
```

| `fit` ç±»å‹        | è¯´æ˜                 |
| --------------- | ------------------ |
| `FlexFit.tight` | å¼ºåˆ¶å¡«æ»¡åˆ†é…åˆ°çš„ç©ºé—´         |
| `FlexFit.loose` | å¯ä»¥å°äºåˆ†é…åˆ°çš„ç©ºé—´ï¼Œå…è®¸å°ºå¯¸è‡ªé€‚åº” |

---

## ğŸ“¦ ç¤ºä¾‹ï¼šç­‰åˆ† 3 å—åŒºåŸŸï¼ˆFlex å®ç°ï¼‰

```dart
Flex(
  direction: Axis.horizontal,
  children: [
    Expanded(child: Container(color: Colors.red)),
    Expanded(child: Container(color: Colors.green)),
    Expanded(child: Container(color: Colors.blue)),
  ],
)
```

ç­‰åŒäºï¼š

```dart
Row(
  children: [
    Expanded(child: Container(color: Colors.red)),
    Expanded(child: Container(color: Colors.green)),
    Expanded(child: Container(color: Colors.blue)),
  ],
)
```

---

## ğŸ¯ ç¤ºä¾‹ï¼šç«–ç›´ 2:1 æ¯”ä¾‹å¸ƒå±€

```dart
Flex(
  direction: Axis.vertical,
  children: [
    Expanded(flex: 2, child: Container(color: Colors.orange)),
    Expanded(flex: 1, child: Container(color: Colors.purple)),
  ],
)
```

---

## ğŸš¨ æ³¨æ„äº‹é¡¹

| é—®é¢˜åœºæ™¯      | è§£å†³æ–¹æ³•æˆ–è¯´æ˜                          |
| --------- | -------------------------------- |
| å­ç»„ä»¶è¶…å‡ºç©ºé—´   | ç”¨ `Expanded` æˆ– `Flexible` æ§åˆ¶     |
| å†…å®¹ä¸æ˜¾ç¤ºæˆ–æ— å¸ƒå±€ | æ£€æŸ¥æ˜¯å¦è®¾ç½®äº†æ–¹å‘å’Œç©ºé—´æ˜¯å¦å……è¶³                 |
| ä¸æ»šåŠ¨çš„é—®é¢˜    | ç”¨ `SingleChildScrollView` åŒ…è£¹     |
| ä¸å¸Œæœ›å¡«æ»¡ç©ºé—´   | ç”¨ `Flexible(fit: FlexFit.loose)` |

---

## ğŸ”š æ€»ç»“

| ç‰¹æ€§            | Flex        | Row / Column          |
| ------------- | ----------- | --------------------- |
| ä¸»è½´æ–¹å‘å¯é…ç½®       | âœ…           | âŒï¼ˆRow æ˜¯æ¨ªå‘ï¼ŒColumn æ˜¯çºµå‘ï¼‰ |
| é€šå¸¸ç”¨äº          | çµæ´»æ§åˆ¶æ¨ª/ç«–å¸ƒå±€æ–¹å‘ | å¸¸è§„ UI åˆ—è¡¨å’Œå¸ƒå±€           |
| ä¸ Expanded æ­é… | å¸¸è§äºåŠ¨æ€åˆ†é…ç©ºé—´   | åŒæ ·æ”¯æŒ                  |

---

## ğŸ’¡ å®æˆ˜å»ºè®®

* å¦‚æœåªæ˜¯åšæ¨ªå‘æˆ–çºµå‘å¸ƒå±€ï¼Œç”¨ `Row` æˆ– `Column` æ›´ç›´è§‚ã€‚
* å¦‚æœä½ è¦åœ¨**è¿è¡Œæ—¶åŠ¨æ€åˆ‡æ¢æ¨ª/ç«–æ–¹å‘**ï¼Œç”¨ `Flex` æ›´åˆé€‚ã€‚
* `Expanded` ç”¨äº**å¡«æ»¡å‰©ä½™ç©ºé—´**ï¼›`Flexible` ç”¨äº**æŒ‰éœ€å æ®ç©ºé—´**ã€‚

---




## å…­ã€AspectRatio
åœ¨ Flutter ä¸­ï¼Œ`AspectRatio` æ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„å¸ƒå±€ç»„ä»¶ï¼Œç”¨æ¥ **å¼ºåˆ¶å­ç»„ä»¶æŒ‰ç…§ä¸€å®šçš„å®½é«˜æ¯”è¿›è¡Œå¸ƒå±€**ã€‚è¿™å¯¹äºéœ€è¦åœ¨å„ç§å±å¹•å°ºå¯¸ä¸‹ä¿æŒå›¾åƒã€è§†é¢‘ã€ç»„ä»¶çš„æ¯”ä¾‹éå¸¸å…³é”®ã€‚

> **`AspectRatio` çš„ä½œç”¨æ˜¯è®©å­ç»„ä»¶ä¿æŒä¸€ä¸ªå›ºå®šçš„å®½é«˜æ¯”ä¾‹ã€‚**

---

## ğŸ“ å¸¸è§ä½¿ç”¨åœºæ™¯

* å›¾ç‰‡ã€è§†é¢‘æ’­æ”¾å™¨ä¿æŒ 16:9ã€4:3ã€1:1 ç­‰æ¯”ä¾‹ã€‚
* å¡ç‰‡ã€æŒ‰é’®ã€å›¾æ ‡åœ¨ä¸åŒè®¾å¤‡ä¸Šä¿æŒç›¸åŒæ¯”ä¾‹ã€‚
* ç½‘æ ¼ä¸­çš„å…ƒç´ ä¿æŒç»Ÿä¸€è§†è§‰æ•ˆæœã€‚

---

## ğŸ§± åŸºæœ¬ç”¨æ³•

```dart
AspectRatio(
  aspectRatio: 16 / 9, // å®½é«˜æ¯” = å®½ Ã· é«˜
  child: Container(
    color: Colors.blue,
  ),
)
```

è¿™æ®µä»£ç ä¼šæ¸²æŸ“ä¸€ä¸ª**å®½é«˜æ¯”ä¸º 16:9 çš„è“è‰²å®¹å™¨**ã€‚å¦‚æœå®½åº¦æ˜¯ 160pxï¼Œé«˜åº¦å°±æ˜¯ 90pxï¼›å®½åº¦æ˜¯ 320pxï¼Œé«˜åº¦å°±æ˜¯ 180pxï¼Œä¾æ­¤ç±»æ¨ã€‚

---

## ğŸ¯ å‚æ•°è¯´æ˜

| å‚æ•°å           | ç±»å‹       | è¯´æ˜                           |
| ------------- | -------- | ---------------------------- |
| `aspectRatio` | `double` | è®¾ç½®å®½é«˜æ¯”ï¼Œå®½åº¦ Ã· é«˜åº¦ï¼Œå¦‚ `1.0` è¡¨ç¤º 1:1 |

---

## ğŸ”§ å¦‚ä½•ç”Ÿæ•ˆï¼Ÿ

`AspectRatio` æœ¬èº«ä¸ä¼šé™åˆ¶è‡ªèº«çš„å¤§å°ï¼Œä½†ä¼šè¦æ±‚å…¶**çˆ¶ç»„ä»¶å…è®¸å®ƒæŒ‰æ¯”ä¾‹è°ƒæ•´å°ºå¯¸**ã€‚å¦‚æœçˆ¶ç»„ä»¶é™åˆ¶äº†å°ºå¯¸ï¼Œ`AspectRatio` ä¼šåœ¨å¯ç”¨ç©ºé—´ä¸­å°½é‡ä¿æŒæ¯”ä¾‹ã€‚

---

## ğŸ“¦ å…¸å‹ç¤ºä¾‹

### 1. è§†é¢‘æ’­æ”¾å™¨å ä½ç¬¦ï¼ˆ16:9ï¼‰

```dart
AspectRatio(
  aspectRatio: 16 / 9,
  child: Container(color: Colors.black),
)
```

### 2. æ­£æ–¹å½¢å¤´åƒ

```dart
AspectRatio(
  aspectRatio: 1,
  child: ClipRRect(
    borderRadius: BorderRadius.circular(8),
    child: Image.network(
      'https://example.com/avatar.png',
      fit: BoxFit.cover,
    ),
  ),
)
```

### 3. GridView ä¸­ä¿æŒæ¯”ä¾‹é¡¹

```dart
GridView.count(
  crossAxisCount: 2,
  children: [
    AspectRatio(
      aspectRatio: 3 / 2,
      child: Container(color: Colors.green),
    ),
    AspectRatio(
      aspectRatio: 3 / 2,
      child: Container(color: Colors.orange),
    ),
  ],
)
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

| é—®é¢˜                  | åŸå› æˆ–è§£å†³æ–¹æ¡ˆ                                     |
| ------------------- | ------------------------------------------- |
| `AspectRatio` é«˜åº¦ä¸º 0 | çˆ¶ç»„ä»¶æ²¡æœ‰çº¦æŸå®½åº¦ï¼Œæ— æ³•ç¡®å®šæ¯”ä¾‹ï¼ˆå¦‚æ”¾åœ¨æ— é™å®½ç¯å¢ƒä¸­ï¼‰                 |
| è¶…å‡ºå±å¹•æˆ–å˜å½¢             | ä¸ `Expanded`ã€`Flexible`ã€`FittedBox` ç­‰ä¸€èµ·ä½¿ç”¨æ§åˆ¶ |
| å›¾åƒæœªå¡«æ»¡å®¹å™¨             | éœ€è¦è®¾ç½® `fit: BoxFit.cover` æˆ–å…¶ä»– `BoxFit` æ¨¡å¼    |

---

## ğŸ§  æ€»ç»“

| ç‰¹æ€§    | è¯´æ˜                                  |
| ----- | ----------------------------------- |
| æ§åˆ¶æ¯”ä¾‹  | é€šè¿‡è®¾ç½® `aspectRatio: å®½ / é«˜` å¼ºåˆ¶å­ç»„ä»¶ä¿æŒæ¯”ä¾‹ |
| ä¸æ§åˆ¶å¤§å° | å®é™…å®½åº¦ç”±çˆ¶ç»„ä»¶å†³å®šï¼Œé«˜åº¦éšä¹‹è®¡ç®—                   |
| å¸¸è§ç”¨é€”  | è§†é¢‘ã€å›¾ç‰‡ã€æ­£æ–¹å½¢æŒ‰é’®ã€ç½‘æ ¼ç»Ÿä¸€æ¯”ä¾‹ç­‰                 |

---




