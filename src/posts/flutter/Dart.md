---
title: Dart è¯­æ³•çš„ç³»ç»Ÿæ€»ç»“
tags:
   - flutter
---





## âœ… ä¸€ã€åŸºç¡€è¯­æ³•

### 1. å˜é‡å£°æ˜

```dart
var name = 'John';      // è‡ªåŠ¨ç±»å‹æ¨æ–­
String name = 'John';   // æ˜¾å¼å£°æ˜ç±»å‹
final age = 30;         // è¿è¡Œæ—¶å¸¸é‡ï¼ˆä¸å¯ä¿®æ”¹ï¼‰
const pi = 3.14;        // ç¼–è¯‘æ—¶å¸¸é‡ï¼ˆä¸å¯ä¿®æ”¹ï¼‰
```

### 2. æ•°æ®ç±»å‹

* `int`, `double`, `num`, `String`, `bool`
* `dynamic`ï¼šè¿è¡Œæ—¶ç¡®å®šç±»å‹
* `var`ï¼šç¼–è¯‘æ—¶æ¨æ–­ç±»å‹
* `List`, `Set`, `Map`


---

### âœ… 1. `final`ï¼šè¿è¡Œæ—¶å¸¸é‡

* **å«ä¹‰**ï¼šåªèƒ½èµ‹å€¼ä¸€æ¬¡ï¼Œä½†å€¼æ˜¯åœ¨**è¿è¡Œæ—¶**ç¡®å®šçš„ã€‚
* **ç”¨æ³•åœºæ™¯**ï¼šå½“ä½ åœ¨è¿è¡Œæ—¶æ‰èƒ½è·å–å€¼ï¼Œæ¯”å¦‚ç½‘ç»œè¯·æ±‚ã€æ—¶é—´æˆ³ã€ç”¨æˆ·è¾“å…¥ç­‰ã€‚
* **ç¤ºä¾‹**ï¼š

```dart
final DateTime now = DateTime.now(); // åˆæ³•
final name = getUserName();          // åªè¦èµ‹å€¼ä¸€æ¬¡å°±å¯ä»¥
```

---

### âœ… 2. `const`ï¼šç¼–è¯‘æ—¶å¸¸é‡

* **å«ä¹‰**ï¼šåœ¨**ç¼–è¯‘æ—¶å°±å¿…é¡»ç¡®å®š**å€¼ï¼Œä¸”åœ¨æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå†…ä¸å¯æ”¹å˜ã€‚
* **ç”¨æ³•åœºæ™¯**ï¼šé€‚åˆå®šä¹‰å›ºå®šä¸å˜çš„å€¼ï¼Œå¦‚å­—ç¬¦ä¸²å­—é¢é‡ã€å›ºå®šé…ç½®ç­‰ã€‚
* **ç¤ºä¾‹**ï¼š

```dart
const pi = 3.14159;        // ç¼–è¯‘æ—¶å¸¸é‡
const name = "flutter";    // å­—é¢é‡

// å¯ä»¥åµŒå¥—ä½¿ç”¨
const list = [1, 2, 3];
```

---

####  ğŸš« åŒºåˆ«æ€»ç»“ï¼š

| ç‰¹æ€§                | `const`               | `final`                      |
| ----------------- | --------------------- | ---------------------------- |
| ä½•æ—¶èµ‹å€¼              | ç¼–è¯‘æ—¶                   | è¿è¡Œæ—¶                          |
| æ˜¯å¦å¯å˜              | âŒ ä¸å¯å˜                 | âŒ ä¸å¯å˜                        |
| ä½¿ç”¨é™åˆ¶              | å€¼å¿…é¡»åœ¨ç¼–è¯‘æ—¶å¯çŸ¥             | å€¼åªéœ€è¿è¡Œæ—¶ç¡®å®š                     |
| ç¤ºä¾‹                | `const a = 10;`       | `final a = getValue();`      |
| Flutter Widget ç¤ºä¾‹ | `const Text("hello")` | `final text = Text("hello")` |

---

####  âœ… Flutter ä¸­ä½¿ç”¨å»ºè®®

* å¦‚æœä½ è¦å®šä¹‰çš„å€¼æ˜¯å›ºå®šå­—é¢é‡ï¼ˆå¦‚ Text ä¸­çš„å­—ç¬¦ä¸²ã€é¢œè‰²ç­‰ï¼‰ï¼Œ**ä¼˜å…ˆç”¨ `const`**ã€‚
* å¦‚æœä½ è¦ç”¨çš„æ˜¯å‡½æ•°è¿”å›å€¼æˆ–è¿è¡Œä¸­åˆ›å»ºçš„å˜é‡ï¼Œ**ä½¿ç”¨ `final`**ã€‚

---

####  ğŸš€ è¿›é˜¶æç¤ºï¼šæ„é€ å‡½æ•°ä¸­çš„ `const`

```dart
const myWidget = MyWidget(); // è‹¥ MyWidget æ˜¯ const æ„é€ å‡½æ•°
```

è¿™èƒ½æå‡æ€§èƒ½ï¼Œé¿å…é‡å¤æ„å»º widgetã€‚

---

### ä¸€ã€`var` çš„å«ä¹‰

* `var` è¡¨ç¤º**æ ¹æ®èµ‹å€¼è‡ªåŠ¨æ¨æ–­ç±»å‹**ã€‚
* å˜é‡å¿…é¡»**ç«‹å³èµ‹å€¼**ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚
* **ä¸æ˜¯åŠ¨æ€ç±»å‹**ï¼šä¸€æ—¦èµ‹å€¼ï¼Œå…¶ç±»å‹å°±ç¡®å®šäº†ã€‚

```dart
var name = 'Tom';     // æ¨æ–­ä¸º String
name = 'Jerry';       // âœ… å¯ä»¥ç»§ç»­èµ‹å€¼ä¸º String
// name = 123;        // âŒ æŠ¥é”™ï¼Œä¸èƒ½èµ‹å€¼ä¸º int
```

---

### äºŒã€`late` çš„å«ä¹‰

* `late` è¡¨ç¤º**å»¶è¿Ÿåˆå§‹åŒ–**å˜é‡ï¼Œä¹Ÿå°±æ˜¯è¯´**ä¸éœ€è¦ç«‹å³èµ‹å€¼**ã€‚
* ä¸€èˆ¬ç”¨äº `final` æˆ– æ˜ç¡®ç±»å‹ çš„å˜é‡ã€‚
* ç”¨åœ¨ä½ **ç¡®å®šä¹‹åä¸€å®šä¼šèµ‹å€¼**ï¼Œä½†åˆ**æš‚æ—¶æ²¡æ³•èµ‹å€¼**çš„åœºæ™¯ã€‚
* æ¯”å¦‚ï¼šä¾èµ–æ³¨å…¥ã€ç”Ÿå‘½å‘¨æœŸåˆå§‹åŒ–åå†èµ‹å€¼ç­‰ã€‚

```dart
late String name;      // å£°æ˜ä½†ä¸ç«‹å³èµ‹å€¼
name = 'Flutter';      // ç¨ååˆå§‹åŒ–
print(name);           // âœ… æ­£å¸¸ä½¿ç”¨
```

å¦‚æœä½ å£°æ˜äº† `late` ä½†ä¸€ç›´æ²¡èµ‹å€¼ï¼Œå°±è®¿é—®å®ƒï¼Œä¼šæŠ›å‡º `LateInitializationError`ã€‚

---

### ä¸‰ã€`late final`

* ç»„åˆä½¿ç”¨ï¼šè¡¨ç¤º**åªèƒ½èµ‹å€¼ä¸€æ¬¡çš„å»¶è¿Ÿåˆå§‹åŒ–å˜é‡**ã€‚
* ç”¨äºé‚£äº›éœ€è¦æ‡’åŠ è½½ã€ä½†åˆåªè¯»çš„å€¼ã€‚

```dart
late final int value;
value = 42;           // âœ… ç¬¬ä¸€æ¬¡èµ‹å€¼
// value = 100;       // âŒ ç¬¬äºŒæ¬¡èµ‹å€¼ä¼šæŠ¥é”™
```

---

#### å››ã€å¯¹æ¯”æ€»ç»“

| å…³é”®å­—          | æ˜¯å¦éœ€è¦ç«‹å³èµ‹å€¼ | æ˜¯å¦å¯ä»¥ä¿®æ”¹    | æ˜¯å¦å¯å˜ç±»å‹        | å…¸å‹ç”¨é€”        |
| ------------ | -------- | --------- | ------------- | ----------- |
| `var`        | âœ… æ˜¯      | âœ… æ˜¯       | âŒ å¦ï¼ˆç±»å‹ç¡®å®šï¼‰     | æ™®é€šå±€éƒ¨å˜é‡      |
| `final`      | âœ… æ˜¯      | âŒ å¦       | âŒ å¦           | å¸¸é‡å€¼         |
| `late`       | âŒ å¦      | âœ…ï¼ˆè§†é…åˆçš„ä¿®é¥°ï¼‰ | âœ…ï¼ˆè¦çœ‹æ˜¯å¦ finalï¼‰ | å»¶è¿Ÿåˆå§‹åŒ–       |
| `late final` | âŒ å¦      | âŒ å¦       | âŒ å¦           | å»¶è¿Ÿèµ‹å€¼ä¸€æ¬¡ã€åªè¯»å˜é‡ |

---

#### äº”ã€ä»€ä¹ˆæ—¶å€™è¯¥ç”¨å“ªä¸€ä¸ªï¼Ÿ

* å˜é‡ç«‹åˆ»æœ‰å€¼ â†’ ç”¨ `var` æˆ– `final`
* å˜é‡ä¸èƒ½ç«‹å³èµ‹å€¼ï¼Œä½†ä¿è¯å°†æ¥ä¸€å®šèµ‹å€¼ â†’ ç”¨ `late` æˆ– `late final`
* åŠ¨æ€ç±»å‹ï¼ˆä¸æ¨èï¼‰ â†’ `dynamic` æˆ– `var name;`ï¼ˆæœªèµ‹å€¼ï¼‰

---

## âœ… äºŒã€æµç¨‹æ§åˆ¶

### 1. æ¡ä»¶åˆ¤æ–­

```dart
if (age > 18) {
  print('Adult');
} else if (age == 18) {
  print('Just 18');
} else {
  print('Minor');
}
```

### 2. switch è¯­å¥

```dart
switch (value) {
  case 1:
    print('One');
    break;
  default:
    print('Default');
}
```

### 3. å¾ªç¯

```dart
for (var i = 0; i < 5; i++) {
  print(i);
}

while (true) {
  break;
}

do {
  print('Run once');
} while (false);
```

---

## âœ… ä¸‰ã€é›†åˆç±»å‹

### 1. åˆ—è¡¨ List

```dart
var list = [1, 2, 3];
list.add(4);
list.removeAt(0);
```

### 2. é›†åˆ Set

```dart
var s = <int>{1, 2, 3};
s.add(4);
```

### 3. æ˜ å°„ Map

```dart
var map = {'name': 'John', 'age': 30};
map['gender'] = 'male';
```

---

## âœ… å››ã€å‡½æ•° Function

```dart
int add(int a, int b) {
  return a + b;
}

void greet([String name = 'Guest']) {
  print('Hello $name');
}

void log({String? tag, String? msg}) {
  print('[$tag] $msg');
}

var multiply = (int a, int b) => a * b;
```

---

## âœ… äº”ã€ç±»ä¸å¯¹è±¡

```dart
class Person {
  String name;
  int age;

  // æ„é€ å‡½æ•°
  Person(this.name, this.age);

  // å‘½åæ„é€ å‡½æ•°
  Person.withName(this.name) : age = 0;

  // æ–¹æ³•
  void sayHello() {
    print('Hello, I am $name');
  }
}
```

### ç»§æ‰¿ä¸é‡å†™

```dart
class Student extends Person {
  String school;

  Student(String name, int age, this.school) : super(name, age);

  @override
  void sayHello() {
    print('Hello, I study at $school');
  }
}
```

---

## âœ… å…­ã€å¼‚æ­¥ç¼–ç¨‹

### Future å¼‚æ­¥å‡½æ•°

```dart
Future<String> fetchData() async {
  await Future.delayed(Duration(seconds: 2));
  return 'Done';
}

void main() async {
  print(await fetchData());
}
```

### Stream æµå¼æ•°æ®

```dart
Stream<int> counter() async* {
  for (int i = 0; i < 3; i++) {
    yield i;
  }
}

void main() async {
  await for (var value in counter()) {
    print(value);
  }
}
```

---

## âœ… ä¸ƒã€å…¶ä»–å…³é”®ç‰¹æ€§

### ç©ºå®‰å…¨

```dart
String? name; // å¯ä»¥ä¸º null
name = null;
```

### æ“ä½œç¬¦

* `??`ï¼šç©ºå€¼åˆå¹¶ï¼ˆå¦‚æœå‰é¢çš„å€¼ä¸º nullï¼Œåˆ™è¿”å›åé¢çš„å€¼ï¼‰
* `??=`ï¼šèµ‹é»˜è®¤å€¼
* `!`ï¼šéç©ºæ–­è¨€
* `?..`ï¼šå®‰å…¨è°ƒç”¨

```dart
String? name;
print(name ?? 'Unknown');
```

---



## âœ… æ¡ä»¶åˆ¤æ–­ï¼ˆ`if`, `else if`, `else`ï¼‰

```dart
int x = 10;

if (x > 0) {
  print('x is positive');
} else if (x == 0) {
  print('x is zero');
} else {
  print('x is negative');
}
```

---

## âœ… ç±»å‹è½¬æ¢ï¼ˆType Conversionï¼‰

### 1. **åŸºç¡€ç±»å‹è½¬æ¢**

```dart
// String â†’ int
int a = int.parse('123');

// String â†’ double
double b = double.parse('3.14');

// int â†’ String
String c = 123.toString();

// double â†’ String
String d = 3.14.toString();

// double â†’ int
int e = 3.14.toInt();
```

### 2. **ç±»å‹æ£€æŸ¥ä¸è½¬æ¢ï¼ˆ`is`, `as`, `is!`ï¼‰**

```dart
var obj = 'hello';

if (obj is String) {
  print(obj.length); // ç±»å‹å®‰å…¨åœ°è®¿é—®
}

(obj as String).toUpperCase(); // å¼ºåˆ¶è½¬æ¢
```

---

## âœ… ç®—æœ¯è¿ç®—ç¬¦

| è¿ç®—ç¬¦  | è¯´æ˜            | ç¤ºä¾‹        |
| ---- | ------------- | --------- |
| `+`  | åŠ æ³•            | `2 + 3`   |
| `-`  | å‡æ³•            | `5 - 2`   |
| `*`  | ä¹˜æ³•            | `3 * 4`   |
| `/`  | é™¤æ³•ï¼ˆè¿”å› doubleï¼‰ | `10 / 4`  |
| `~/` | æ•´é™¤ï¼ˆè¿”å› intï¼‰    | `10 ~/ 4` |
| `%`  | å–ä½™            | `10 % 3`  |

---

## âœ… å…³ç³»è¿ç®—ç¬¦ï¼ˆè¿”å›å¸ƒå°”å€¼ï¼‰

| è¿ç®—ç¬¦  | è¯´æ˜   | ç¤ºä¾‹       |
| ---- | ---- | -------- |
| `==` | ç›¸ç­‰   | `a == b` |
| `!=` | ä¸ç­‰   | `a != b` |
| `>`  | å¤§äº   | `a > b`  |
| `<`  | å°äº   | `a < b`  |
| `>=` | å¤§äºç­‰äº | `a >= b` |
| `<=` | å°äºç­‰äº | `a <= b` |

---

## âœ… èµ‹å€¼è¿ç®—ç¬¦

| è¿ç®—ç¬¦   | ç¤ºä¾‹        | è¯´æ˜              |
| ----- | --------- | --------------- |
| `=`   | `a = b`   | èµ‹å€¼              |
| `+=`  | `a += b`  | ç­‰åŒäº `a = a + b` |
| `-=`  | `a -= b`  | ç­‰åŒäº `a = a - b` |
| `*=`  | `a *= b`  |                 |
| `/=`  | `a /= b`  |                 |
| `~/=` | `a ~/= b` | æ•´é™¤èµ‹å€¼            |
| `%=`  | `a %= b`  |                 |

---

## âœ… æ¡ä»¶è¡¨è¾¾å¼

### 1. **ä¸‰ç›®è¿ç®—ç¬¦ï¼ˆç±»ä¼¼ JavaScriptï¼‰**

```dart
int age = 20;
String result = age >= 18 ? 'Adult' : 'Minor';
print(result);
```

### 2. **ç©ºåˆ¤æ–­è¿ç®—ç¬¦ï¼ˆ??, ??=ï¼‰**

```dart
String? name;

// å¦‚æœ name ä¸º nullï¼Œå°±èµ‹å€¼ä¸º 'Guest'
String displayName = name ?? 'Guest';

// å¦‚æœ name ä¸º nullï¼Œå°±å°† name èµ‹å€¼ä¸º 'Guest'
name ??= 'Guest';
```

### 3. **ç©ºå®‰å…¨æˆå‘˜è®¿é—®ï¼ˆ?.ï¼‰**

```dart
Person? p;
print(p?.name); // p ä¸ä¸º null æ‰ä¼šè®¿é—® name
```




