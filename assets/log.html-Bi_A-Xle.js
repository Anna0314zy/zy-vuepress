import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as s,e as t,o as l}from"./app-DkVa7Hgi.js";const o={};function a(r,e){return l(),s("div",null,e[0]||(e[0]=[t(`<h1 id="loggerservice" tabindex="-1"><a class="header-anchor" href="#loggerservice"><span>LoggerService</span></a></h1><p><code>LoggerService</code> 文件，是一个<strong>完整的日志收集与上报服务</strong>，专门用来在课堂端或者播放端统一处理技术日志和业务日志。可以把它理解为一个 <strong>“日志中枢”</strong>，负责管理不同类型的日志、统一上报、并提供给外部调用。下面我给你详细拆解。</p><hr><h2 id="_1️⃣-核心功能" tabindex="-1"><a class="header-anchor" href="#_1️⃣-核心功能"><span>1️⃣ 核心功能</span></a></h2><ol><li><p><strong>提供两类日志</strong>：</p><ul><li><strong>ITS 技术日志</strong> (<code>itsLog</code>)：记录技术相关事件，比如播放器状态、系统异常等。</li><li><strong>BIZ 业务日志</strong> (<code>bizLog</code>)：记录业务事件，比如用户操作、课堂行为等。</li></ul></li><li><p><strong>支持日志上报</strong>：</p><ul><li>日志数据会通过内部 <code>Logger</code> 实例发送到指定服务器。</li><li>每条日志都有唯一 ID（<code>uuidV1</code>）和序号（<code>sid_num</code>），保证日志可追踪。</li><li>可以加上课堂相关信息（<code>uid</code>、<code>role_id</code>、<code>cr_sid</code> 等），方便多端追踪。</li></ul></li><li><p><strong>动态控制日志等级</strong>：</p><ul><li>支持 <code>DEBUG</code> 模式，可以将所有日志打印到控制台，便于开发调试。</li><li>可以对不同日志池（ITS / BIZ）单独设置等级。</li></ul></li><li><p><strong>提供给全局调用</strong>：</p><ul><li>将 <code>itsLog</code> 方法挂在 <code>window.playerLogger</code> 上，允许全局直接调用。</li><li>通过 <code>LoggerService.loggerPool</code> 管理不同模块的日志实例。</li></ul></li></ol><hr><h2 id="_2️⃣-核心属性" tabindex="-1"><a class="header-anchor" href="#_2️⃣-核心属性"><span>2️⃣ 核心属性</span></a></h2><table><thead><tr><th>属性</th><th>功能</th></tr></thead><tbody><tr><td><code>loggerPool</code></td><td>保存 ITS / BIZ 日志实例，避免重复创建</td></tr><tr><td><code>configData</code></td><td>日志全局配置，例如课堂 ID、用户 ID、版本号等</td></tr><tr><td><code>loggerMeta</code></td><td>日志上下文信息，比如课堂状态、traceID 等</td></tr><tr><td><code>tLog / hLog</code></td><td>内部 Logger 实例，分别负责技术日志（tLog）和业务日志（hLog）</td></tr><tr><td><code>deltaTime</code></td><td>时间差，用于校准日志时间</td></tr></tbody></table><hr><h2 id="_3️⃣-核心方法" tabindex="-1"><a class="header-anchor" href="#_3️⃣-核心方法"><span>3️⃣ 核心方法</span></a></h2><h3 id="a-创建和销毁日志器" tabindex="-1"><a class="header-anchor" href="#a-创建和销毁日志器"><span>a) 创建和销毁日志器</span></a></h3><div class="language-ts line-numbers-mode" data-highlighter="shiki" data-ext="ts" data-title="ts" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">createLogger</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">servers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">destroyLogger</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>createLogger</code>：初始化 ITS / BIZ Logger 实例，并绑定全局 <code>window.playerLogger</code></li><li><code>destroyLogger</code>：销毁日志实例，释放资源</li></ul><hr><h3 id="b-获取日志实例" tabindex="-1"><a class="header-anchor" href="#b-获取日志实例"><span>b) 获取日志实例</span></a></h3><div class="language-ts line-numbers-mode" data-highlighter="shiki" data-ext="ts" data-title="ts" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">itsLog</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">bizLog</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>根据模块名创建或复用日志实例</li><li>返回 <code>UtilLog</code> 对象，可以直接调用 <code>.debug() / .info() / .warn()</code></li></ul><hr><h3 id="c-日志发送" tabindex="-1"><a class="header-anchor" href="#c-日志发送"><span>c) 日志发送</span></a></h3><div class="language-ts line-numbers-mode" data-highlighter="shiki" data-ext="ts" data-title="ts" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sendRequest</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">data</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">level</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">logger</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>合并全局配置和日志内容</li><li>打印控制台（QA / 开发模式可选）</li><li>通过内部 <code>Logger</code> 发送到服务器</li></ul><hr><h3 id="d-辅助方法" tabindex="-1"><a class="header-anchor" href="#d-辅助方法"><span>d) 辅助方法</span></a></h3><ul><li><code>setLoggerMeta(meta)</code>：设置全局日志上下文（比如 traceID、课堂状态）</li><li><code>setDeltaTime(dt)</code>：设置客户端与服务器的时间差</li><li><code>config(conf)</code>：更新日志全局配置</li><li><code>debug()</code>：切换日志等级到 DEBUG，控制台打印所有日志</li></ul><hr><h2 id="_4️⃣-总结" tabindex="-1"><a class="header-anchor" href="#_4️⃣-总结"><span>4️⃣ 总结</span></a></h2><p>这个 <code>LoggerService</code> 文件的作用就是：</p><blockquote><p><strong>集中管理课堂或播放器的技术日志和业务日志，支持全局调用、等级控制、唯一追踪、服务器上报，以及开发模式下控制台输出。</strong></p></blockquote><p>它和你前面贴的 <code>CursorService</code> / <code>MessageService</code> / <code>PlayerSDK</code> 结合使用时，就可以把课堂中发生的操作、错误、光标移动、翻页等事件全量记录下来，方便调试和统计。</p><hr><p>如果你想，我可以帮你画一张 <strong>LoggerService 工作流程图</strong>，显示 ITS / BIZ 日志从创建、调用、发送到服务器的全过程，会非常直观。</p><p>你想让我画吗？</p>`,32)]))}const c=i(o,[["render",a]]),h=JSON.parse('{"path":"/posts/%E7%9F%A5%E8%AF%86%E9%9B%86%E9%94%A6/cocos%20%E5%B7%A5%E7%A8%8B%E6%9E%84%E5%BB%BA/player/log.html","title":"LoggerService","lang":"zh-CN","frontmatter":{"description":"LoggerService LoggerService 文件，是一个完整的日志收集与上报服务，专门用来在课堂端或者播放端统一处理技术日志和业务日志。可以把它理解为一个 “日志中枢”，负责管理不同类型的日志、统一上报、并提供给外部调用。下面我给你详细拆解。 1️⃣ 核心功能 提供两类日志： ITS 技术日志 (itsLog)：记录技术相关事件，比如播放器...","head":[["meta",{"property":"og:url","content":"https://mister-hope.github.io/zy-vuepress/posts/%E7%9F%A5%E8%AF%86%E9%9B%86%E9%94%A6/cocos%20%E5%B7%A5%E7%A8%8B%E6%9E%84%E5%BB%BA/player/log.html"}],["meta",{"property":"og:site_name","content":"我的基地"}],["meta",{"property":"og:title","content":"LoggerService"}],["meta",{"property":"og:description","content":"LoggerService LoggerService 文件，是一个完整的日志收集与上报服务，专门用来在课堂端或者播放端统一处理技术日志和业务日志。可以把它理解为一个 “日志中枢”，负责管理不同类型的日志、统一上报、并提供给外部调用。下面我给你详细拆解。 1️⃣ 核心功能 提供两类日志： ITS 技术日志 (itsLog)：记录技术相关事件，比如播放器..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-11-25T09:19:17.000Z"}],["meta",{"property":"article:modified_time","content":"2025-11-25T09:19:17.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"LoggerService\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-11-25T09:19:17.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Mrs.Zoe\\",\\"url\\":\\"https://mister-hope.com\\"}]}"]]},"headers":[{"level":2,"title":"1️⃣ 核心功能","slug":"_1️⃣-核心功能","link":"#_1️⃣-核心功能","children":[]},{"level":2,"title":"2️⃣ 核心属性","slug":"_2️⃣-核心属性","link":"#_2️⃣-核心属性","children":[]},{"level":2,"title":"3️⃣ 核心方法","slug":"_3️⃣-核心方法","link":"#_3️⃣-核心方法","children":[{"level":3,"title":"a) 创建和销毁日志器","slug":"a-创建和销毁日志器","link":"#a-创建和销毁日志器","children":[]},{"level":3,"title":"b) 获取日志实例","slug":"b-获取日志实例","link":"#b-获取日志实例","children":[]},{"level":3,"title":"c) 日志发送","slug":"c-日志发送","link":"#c-日志发送","children":[]},{"level":3,"title":"d) 辅助方法","slug":"d-辅助方法","link":"#d-辅助方法","children":[]}]},{"level":2,"title":"4️⃣ 总结","slug":"_4️⃣-总结","link":"#_4️⃣-总结","children":[]}],"git":{"createdTime":1764062357000,"updatedTime":1764062357000,"contributors":[{"name":"zouyu","username":"zouyu","email":"891374900@qq.com","commits":1,"url":"https://github.com/zouyu"}]},"readingTime":{"minutes":2.56,"words":769},"filePathRelative":"posts/知识集锦/cocos 工程构建/player/log.md","localizedDate":"2025年11月25日","excerpt":"\\n<p><code>LoggerService</code> 文件，是一个<strong>完整的日志收集与上报服务</strong>，专门用来在课堂端或者播放端统一处理技术日志和业务日志。可以把它理解为一个 <strong>“日志中枢”</strong>，负责管理不同类型的日志、统一上报、并提供给外部调用。下面我给你详细拆解。</p>\\n<hr>\\n<h2>1️⃣ 核心功能</h2>\\n<ol>\\n<li>\\n<p><strong>提供两类日志</strong>：</p>\\n<ul>\\n<li><strong>ITS 技术日志</strong> (<code>itsLog</code>)：记录技术相关事件，比如播放器状态、系统异常等。</li>\\n<li><strong>BIZ 业务日志</strong> (<code>bizLog</code>)：记录业务事件，比如用户操作、课堂行为等。</li>\\n</ul>\\n</li>\\n<li>\\n<p><strong>支持日志上报</strong>：</p>\\n<ul>\\n<li>日志数据会通过内部 <code>Logger</code> 实例发送到指定服务器。</li>\\n<li>每条日志都有唯一 ID（<code>uuidV1</code>）和序号（<code>sid_num</code>），保证日志可追踪。</li>\\n<li>可以加上课堂相关信息（<code>uid</code>、<code>role_id</code>、<code>cr_sid</code> 等），方便多端追踪。</li>\\n</ul>\\n</li>\\n<li>\\n<p><strong>动态控制日志等级</strong>：</p>\\n<ul>\\n<li>支持 <code>DEBUG</code> 模式，可以将所有日志打印到控制台，便于开发调试。</li>\\n<li>可以对不同日志池（ITS / BIZ）单独设置等级。</li>\\n</ul>\\n</li>\\n<li>\\n<p><strong>提供给全局调用</strong>：</p>\\n<ul>\\n<li>将 <code>itsLog</code> 方法挂在 <code>window.playerLogger</code> 上，允许全局直接调用。</li>\\n<li>通过 <code>LoggerService.loggerPool</code> 管理不同模块的日志实例。</li>\\n</ul>\\n</li>\\n</ol>","autoDesc":true}');export{c as comp,h as data};
