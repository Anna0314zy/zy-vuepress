import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,e,o as n}from"./app-DkVa7Hgi.js";const l={};function t(h,i){return n(),a("div",null,i[0]||(i[0]=[e(`<hr><h1 id="ğŸŒŸ-vue-3-ç»„ä»¶çš„æ¸²æŸ“ä¸å¼‚æ­¥æ›´æ–°åŸç†è¯¦è§£" tabindex="-1"><a class="header-anchor" href="#ğŸŒŸ-vue-3-ç»„ä»¶çš„æ¸²æŸ“ä¸å¼‚æ­¥æ›´æ–°åŸç†è¯¦è§£"><span>ğŸŒŸ Vue 3 ç»„ä»¶çš„æ¸²æŸ“ä¸å¼‚æ­¥æ›´æ–°åŸç†è¯¦è§£</span></a></h1><p>Vue 3 åœ¨å®ç°ç»†èŠ‚ä¸Šæœ‰å¾ˆå¤šé‡æ„å’Œä¼˜åŒ–ï¼Œç‰¹åˆ«æ˜¯åœ¨ç»„ä»¶æ¸²æŸ“æµç¨‹å’Œå¼‚æ­¥æ›´æ–°æœºåˆ¶æ–¹é¢ã€‚æœ¬ç¯‡æ–‡æ¡£å°†å›´ç»•ä»¥ä¸‹ä¸‰ä¸ªéƒ¨åˆ†å±•å¼€æ·±å…¥è®²è§£ï¼š</p><ol><li><a href="#1-%E7%BB%84%E4%BB%B6%E7%9A%84%E6%B8%B2%E6%9F%93%E6%B5%81%E7%A8%8B">Vue 3 ç»„ä»¶çš„æ¸²æŸ“æµç¨‹</a></li><li><a href="#2-%E5%BC%82%E6%AD%A5%E6%9B%B4%E6%96%B0%E6%9C%BA%E5%88%B6">Vue 3 çš„å¼‚æ­¥æ›´æ–°åŸç†ï¼ˆnextTick &amp; æ›´æ–°é˜Ÿåˆ—ï¼‰</a></li><li><a href="#3-%E7%BB%84%E4%BB%B6%E6%9B%B4%E6%96%B0%E6%B5%81%E7%A8%8B">ç»„ä»¶æ›´æ–°æµç¨‹ï¼ˆå±æ€§å˜æ›´ã€çŠ¶æ€å“åº”ï¼‰</a></li></ol><hr><h2 id="_1-ç»„ä»¶çš„æ¸²æŸ“æµç¨‹" tabindex="-1"><a class="header-anchor" href="#_1-ç»„ä»¶çš„æ¸²æŸ“æµç¨‹"><span>1. ç»„ä»¶çš„æ¸²æŸ“æµç¨‹</span></a></h2><p>Vue 3 çš„æ¸²æŸ“æ˜¯åŸºäº Virtual DOM å’Œ Proxy å“åº”å¼ç³»ç»Ÿé©±åŠ¨çš„ã€‚æ•´ä¸ªæµç¨‹å¯ä»¥æ‹†è§£ä¸ºå‡ ä¸ªå…³é”®é˜¶æ®µï¼š</p><h3 id="ğŸ§±-åˆå§‹åŒ–æ¸²æŸ“æµç¨‹" tabindex="-1"><a class="header-anchor" href="#ğŸ§±-åˆå§‹åŒ–æ¸²æŸ“æµç¨‹"><span>ğŸ§± åˆå§‹åŒ–æ¸²æŸ“æµç¨‹</span></a></h3><ol><li><p><strong>åˆ›å»ºç»„ä»¶å®ä¾‹ï¼ˆ<code>createComponentInstance</code>ï¼‰</strong></p><ul><li>è®¾ç½®ç»„ä»¶çš„ <code>props</code>ã€<code>slots</code>ã€<code>setupState</code> ç­‰ï¼›</li><li>åˆ›å»º <code>proxy</code> ä»£ç†è®¿é—®ã€‚</li></ul></li><li><p><strong>æ‰§è¡Œ setup å‡½æ•°</strong>ï¼ˆå¦‚æœæ˜¯ Composition APIï¼‰</p><ul><li>setup ä¸­å¯ä½¿ç”¨ reactive/ref ç­‰å“åº”å¼æ•°æ®ï¼›</li><li>è¿”å›å€¼ç»‘å®šåˆ° <code>ctx</code>ï¼Œä¾›æ¨¡æ¿ä½¿ç”¨ã€‚</li></ul></li><li><p><strong>åˆ›å»ºæ¸²æŸ“å‡½æ•°ï¼ˆrenderï¼‰</strong></p><ul><li>ç¼–è¯‘ <code>.vue</code> æ–‡ä»¶çš„æ¨¡æ¿ä¸º <code>render</code> å‡½æ•°ï¼›</li><li>æ‰§è¡Œ <code>render</code> è¿”å› Virtual DOMã€‚</li></ul></li><li><p><strong>æ‰§è¡Œ patchï¼ˆæ ¸å¿ƒ diff å‡½æ•°ï¼‰</strong></p><ul><li>å¯¹æ¯” Virtual DOMï¼›</li><li>é¦–æ¬¡æŒ‚è½½æ—¶æ‰§è¡Œ <code>mountElement</code>ï¼›</li><li>åˆ›å»ºçœŸå® DOM å¹¶æ’å…¥åˆ°å®¹å™¨ä¸­ã€‚</li></ul></li></ol><h3 id="ğŸ–¼ï¸-æ¸²æŸ“ç®€å›¾" tabindex="-1"><a class="header-anchor" href="#ğŸ–¼ï¸-æ¸²æŸ“ç®€å›¾"><span>ğŸ–¼ï¸ æ¸²æŸ“ç®€å›¾ï¼š</span></a></h3><div class="language-txt line-numbers-mode" data-highlighter="shiki" data-ext="txt" data-title="txt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>component =&gt; setup() =&gt; render() =&gt; vnode =&gt; patch() =&gt; DOM</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><hr><h2 id="_2-å¼‚æ­¥æ‰¹é‡æ›´æ–°æœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#_2-å¼‚æ­¥æ‰¹é‡æ›´æ–°æœºåˆ¶"><span>2. å¼‚æ­¥æ‰¹é‡æ›´æ–°æœºåˆ¶</span></a></h2><p>Vue 3 é‡‡ç”¨äº†<strong>å¼‚æ­¥æ‰¹é‡æ›´æ–°ç­–ç•¥</strong>ï¼šå½“å“åº”å¼æ•°æ®å˜åŒ–æ—¶ï¼Œç»„ä»¶ä¸ä¼šç«‹å³é‡æ–°æ¸²æŸ“ï¼Œè€Œæ˜¯å°†æ›´æ–°ä»»åŠ¡åŠ å…¥ä¸€ä¸ªé˜Ÿåˆ—ï¼Œç­‰å¾…â€œ<strong>ä¸‹ä¸€ä¸ªå®ä»»åŠ¡ä¹‹å‰</strong>â€ç»Ÿä¸€æ‰§è¡Œã€‚</p><h3 id="ğŸ“¦-ä¸ºä»€ä¹ˆéœ€è¦å¼‚æ­¥" tabindex="-1"><a class="header-anchor" href="#ğŸ“¦-ä¸ºä»€ä¹ˆéœ€è¦å¼‚æ­¥"><span>ğŸ“¦ ä¸ºä»€ä¹ˆéœ€è¦å¼‚æ­¥ï¼Ÿ</span></a></h3><p>å‡è®¾ä½ åœ¨åŒä¸€ä¸ªäº‹ä»¶å¤„ç†å‡½æ•°é‡Œä¿®æ”¹å¤šä¸ªå“åº”å¼å˜é‡ï¼ŒVue ä¼šæ”¶é›†è¿™äº›å˜åŒ–ï¼Œç„¶å <strong>åˆå¹¶æˆä¸€ä¸ªæ›´æ–°ä»»åŠ¡</strong>ï¼Œä»è€Œé¿å…é‡å¤æ¸²æŸ“ã€‚</p><h3 id="ğŸ§ª-å®ç°åŸç†ç®€è¿°" tabindex="-1"><a class="header-anchor" href="#ğŸ§ª-å®ç°åŸç†ç®€è¿°"><span>ğŸ§ª å®ç°åŸç†ç®€è¿°</span></a></h3><ol><li>å½“å“åº”å¼æ•°æ®å‘ç”Ÿå˜æ›´ï¼Œ<code>effect</code> ä¼šè¢«è§¦å‘ã€‚</li><li><code>scheduler</code> ä¼šå°†å½“å‰æ›´æ–°ä»»åŠ¡åŠ å…¥ <code>jobQueue</code>ã€‚</li><li>Vue ä½¿ç”¨ <code>Promise.resolve().then(flushJobs)</code>ï¼Œåœ¨å¾®ä»»åŠ¡ä¸­æ¸…ç©ºé˜Ÿåˆ—ã€‚</li></ol><div class="language-ts line-numbers-mode" data-highlighter="shiki" data-ext="ts" data-title="ts" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// effect.ts å†…éƒ¨</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">queueJob</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">instance</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">update</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// ä»£ç å®ç°</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> queue</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [];</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">let</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> isFlushing</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> p</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Promise</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">resolve</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">export</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> function</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> queueJob</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">job</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">!</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">queue</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">includes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">job</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)) {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">    queue</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">push</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">job</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">); </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// å­˜å‚¨å½“å‰æ›´æ–°çš„æ“ä½œ</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  // æ•°æ®å˜åŒ–æ›´ å¯èƒ½ä¼šå‡ºç°å¤šä¸ªç»„ä»¶çš„æ›´æ–°ï¼Œæ‰€æœ‰éœ€è¦é‡‡ç”¨é˜Ÿåˆ—æ¥å­˜å‚¨</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">!</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">isFlushing</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    isFlushing</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> true</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// é€šè¿‡æ‰¹å¤„ç†æ¥å®ç°çš„</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">    p</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">then</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">      isFlushing</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">      // è¿™æ ·å¯ç¡®ä¿â€œåˆ·æ–°çš„é‚£ä¸€æ‰¹â€ä»»åŠ¡åªæ‰§è¡Œä¸€æ¬¡ï¼ŒåŒæ—¶åŸå§‹ queue å¯åœ¨æ‰§è¡Œåç»§ç»­æ”¶é›†ä¸‹ä¸€è½®æ–°ä»»åŠ¡ ã€‚</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">      let</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> copyQueue</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> queue</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">slice</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">); </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// å°†å½“å‰è¦æ‰§è¡Œçš„é˜Ÿåˆ—æ‹·è´ä¸€ä»½ï¼Œå¹¶ä¸”æ¸…ç©ºé˜Ÿåˆ—</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">      queue</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">length</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">      copyQueue</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">forEach</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">((</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">job</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        job</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      });</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">      copyQueue</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">length</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    });</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// æµè§ˆå™¨çš„äº‹ä»¶ç¯ã€ä¸€è½®ä¸€è½®çš„å®ç°</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ğŸ”‚-nexttick-çš„ä½œç”¨" tabindex="-1"><a class="header-anchor" href="#ğŸ”‚-nexttick-çš„ä½œç”¨"><span>ğŸ”‚ <code>nextTick</code> çš„ä½œç”¨ï¼Ÿ</span></a></h3><p>å½“ä½ æƒ³ç­‰å¾… DOM æ›´æ–°å®Œæˆåå†æ‰§è¡ŒæŸä¸ªé€»è¾‘ï¼Œå¯ä»¥ç”¨ <code>nextTick()</code>ï¼š</p><div class="language-ts line-numbers-mode" data-highlighter="shiki" data-ext="ts" data-title="ts" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">await</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> nextTick</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">console</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;DOM å·²æ›´æ–°&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="_3-ç»„ä»¶æ›´æ–°æµç¨‹" tabindex="-1"><a class="header-anchor" href="#_3-ç»„ä»¶æ›´æ–°æµç¨‹"><span>3. ç»„ä»¶æ›´æ–°æµç¨‹</span></a></h2><h3 id="âœ¨-å±æ€§æ›´æ–°æˆ–å“åº”å¼æ•°æ®æ›´æ–°ä¼šå‘ç”Ÿä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#âœ¨-å±æ€§æ›´æ–°æˆ–å“åº”å¼æ•°æ®æ›´æ–°ä¼šå‘ç”Ÿä»€ä¹ˆ"><span>âœ¨ å±æ€§æ›´æ–°æˆ–å“åº”å¼æ•°æ®æ›´æ–°ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</span></a></h3><p>ä»¥çˆ¶ç»„ä»¶ä¼ å…¥ <code>props</code> æ›´æ–°ä¸ºä¾‹ï¼š</p><ol><li><p><strong>çˆ¶ç»„ä»¶æ›´æ–°æ—¶ï¼Œpatch è°ƒç”¨å­ç»„ä»¶çš„ patchComponentã€‚</strong></p></li><li><p>å¯¹æ¯”å‰å propsï¼š</p><ul><li>å¦‚æœæœ‰å˜åŒ–ï¼Œä¼šæ›´æ–° <code>instance.props</code>ï¼›</li><li>ç„¶åè§¦å‘ç»„ä»¶çš„ <code>update</code> å‡½æ•°ã€‚</li></ul></li><li><p><strong>ç»„ä»¶ä¼šé‡æ–°æ‰§è¡Œ render å‡½æ•°ï¼Œç”Ÿæˆæ–°çš„ vnodeã€‚</strong></p></li><li><p>Vue ä½¿ç”¨ <code>patch</code> å¯¹æ¯”æ–°æ—§ vnodeï¼Œè¿›è¡Œæœ€å°åŒ–çš„ DOM æ“ä½œã€‚</p></li></ol><h3 id="ğŸ’¡-å“åº”å¼æ•°æ®æ›´æ–°æ—¶" tabindex="-1"><a class="header-anchor" href="#ğŸ’¡-å“åº”å¼æ•°æ®æ›´æ–°æ—¶"><span>ğŸ’¡ å“åº”å¼æ•°æ®æ›´æ–°æ—¶ï¼š</span></a></h3><ol><li>åœ¨ setup ä¸­ä½¿ç”¨ <code>ref</code> æˆ– <code>reactive</code> å®šä¹‰çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼›</li><li><code>effect</code> ä¸­çš„ä¾èµ–ä¼šè¢«è§¦å‘ï¼›</li><li>å°†ç»„ä»¶çš„ <code>update</code> å‡½æ•°æ¨å…¥æ›´æ–°é˜Ÿåˆ—ï¼›</li><li>åœ¨ä¸‹ä¸€ä¸ªå¾®ä»»åŠ¡ä¸­é‡æ–°æ‰§è¡Œ render + patchã€‚</li></ol><hr><h2 id="ğŸ§ -æ€»ç»“-vue-3-ç»„ä»¶æ›´æ–°å…¨é“¾è·¯" tabindex="-1"><a class="header-anchor" href="#ğŸ§ -æ€»ç»“-vue-3-ç»„ä»¶æ›´æ–°å…¨é“¾è·¯"><span>ğŸ§  æ€»ç»“ï¼šVue 3 ç»„ä»¶æ›´æ–°å…¨é“¾è·¯</span></a></h2><div class="language-txt line-numbers-mode" data-highlighter="shiki" data-ext="txt" data-title="txt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>setup() / props å˜åŒ– / å“åº”å¼æ•°æ®æ›´æ–°</span></span>
<span class="line"><span>        â†“</span></span>
<span class="line"><span>  è§¦å‘ reactive çš„ effect</span></span>
<span class="line"><span>        â†“</span></span>
<span class="line"><span>  ç»„ä»¶å®ä¾‹çš„ update è¢«åŠ å…¥æ›´æ–°é˜Ÿåˆ—</span></span>
<span class="line"><span>        â†“</span></span>
<span class="line"><span>  ç­‰å¾…ä¸‹ä¸€ä¸ªå¾®ä»»åŠ¡æ‰§è¡Œ flushJobs()</span></span>
<span class="line"><span>        â†“</span></span>
<span class="line"><span>  update() æ‰§è¡Œ render â†’ vnode</span></span>
<span class="line"><span>        â†“</span></span>
<span class="line"><span>  patch() diff æ–°æ—§ vnode â†’ æœ€å° DOM æ“ä½œ</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="âœ…-å°ç»“" tabindex="-1"><a class="header-anchor" href="#âœ…-å°ç»“"><span>âœ… å°ç»“</span></a></h2><table><thead><tr><th>æ¨¡å—</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>æ¸²æŸ“æµç¨‹</td><td>åˆ›å»ºå®ä¾‹ â†’ setup â†’ render â†’ patch â†’ mount</td></tr><tr><td>å“åº”å¼æ›´æ–°æœºåˆ¶</td><td>ä½¿ç”¨ <code>effect</code> å’Œ <code>scheduler</code> + å¾®ä»»åŠ¡é˜Ÿåˆ—</td></tr><tr><td>å¼‚æ­¥æ¸²æŸ“ç­–ç•¥</td><td>å¤šæ¬¡æ›´æ–°åˆå¹¶ä¸ºä¸€æ¬¡ DOM æ›´æ–°ï¼Œæå‡æ€§èƒ½</td></tr><tr><td>DOM Diff ä¼˜åŒ–</td><td>ä½¿ç”¨ key è¯†åˆ« + æœ€é•¿é€’å¢å­åºåˆ—å‡å°‘èŠ‚ç‚¹ç§»åŠ¨</td></tr></tbody></table><hr>`,36)]))}const k=s(l,[["render",t]]),r=JSON.parse('{"path":"/posts/vue/vue3/%E7%BB%84%E4%BB%B6%E6%9B%B4%E6%96%B0.html","title":"Vue 3 ç»„ä»¶çš„æ¸²æŸ“ä¸å¼‚æ­¥æ‰¹é‡æ›´æ–°åŸç†è¯¦è§£","lang":"zh-CN","frontmatter":{"title":"Vue 3 ç»„ä»¶çš„æ¸²æŸ“ä¸å¼‚æ­¥æ‰¹é‡æ›´æ–°åŸç†è¯¦è§£","tags":["vue"],"description":"ğŸŒŸ Vue 3 ç»„ä»¶çš„æ¸²æŸ“ä¸å¼‚æ­¥æ›´æ–°åŸç†è¯¦è§£ Vue 3 åœ¨å®ç°ç»†èŠ‚ä¸Šæœ‰å¾ˆå¤šé‡æ„å’Œä¼˜åŒ–ï¼Œç‰¹åˆ«æ˜¯åœ¨ç»„ä»¶æ¸²æŸ“æµç¨‹å’Œå¼‚æ­¥æ›´æ–°æœºåˆ¶æ–¹é¢ã€‚æœ¬ç¯‡æ–‡æ¡£å°†å›´ç»•ä»¥ä¸‹ä¸‰ä¸ªéƒ¨åˆ†å±•å¼€æ·±å…¥è®²è§£ï¼š Vue 3 ç»„ä»¶çš„æ¸²æŸ“æµç¨‹ Vue 3 çš„å¼‚æ­¥æ›´æ–°åŸç†ï¼ˆnextTick & æ›´æ–°é˜Ÿåˆ—ï¼‰ ç»„ä»¶æ›´æ–°æµç¨‹ï¼ˆå±æ€§å˜æ›´ã€çŠ¶æ€å“åº”ï¼‰ 1. ç»„ä»¶çš„æ¸²æŸ“æµç¨‹ Vue 3 çš„æ¸²æŸ“æ˜¯åŸºäº Virt...","head":[["meta",{"property":"og:url","content":"https://mister-hope.github.io/zy-vuepress/posts/vue/vue3/%E7%BB%84%E4%BB%B6%E6%9B%B4%E6%96%B0.html"}],["meta",{"property":"og:site_name","content":"æˆ‘çš„åŸºåœ°"}],["meta",{"property":"og:title","content":"Vue 3 ç»„ä»¶çš„æ¸²æŸ“ä¸å¼‚æ­¥æ‰¹é‡æ›´æ–°åŸç†è¯¦è§£"}],["meta",{"property":"og:description","content":"ğŸŒŸ Vue 3 ç»„ä»¶çš„æ¸²æŸ“ä¸å¼‚æ­¥æ›´æ–°åŸç†è¯¦è§£ Vue 3 åœ¨å®ç°ç»†èŠ‚ä¸Šæœ‰å¾ˆå¤šé‡æ„å’Œä¼˜åŒ–ï¼Œç‰¹åˆ«æ˜¯åœ¨ç»„ä»¶æ¸²æŸ“æµç¨‹å’Œå¼‚æ­¥æ›´æ–°æœºåˆ¶æ–¹é¢ã€‚æœ¬ç¯‡æ–‡æ¡£å°†å›´ç»•ä»¥ä¸‹ä¸‰ä¸ªéƒ¨åˆ†å±•å¼€æ·±å…¥è®²è§£ï¼š Vue 3 ç»„ä»¶çš„æ¸²æŸ“æµç¨‹ Vue 3 çš„å¼‚æ­¥æ›´æ–°åŸç†ï¼ˆnextTick & æ›´æ–°é˜Ÿåˆ—ï¼‰ ç»„ä»¶æ›´æ–°æµç¨‹ï¼ˆå±æ€§å˜æ›´ã€çŠ¶æ€å“åº”ï¼‰ 1. ç»„ä»¶çš„æ¸²æŸ“æµç¨‹ Vue 3 çš„æ¸²æŸ“æ˜¯åŸºäº Virt..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-05-20T07:48:26.000Z"}],["meta",{"property":"article:tag","content":"vue"}],["meta",{"property":"article:modified_time","content":"2025-05-20T07:48:26.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Vue 3 ç»„ä»¶çš„æ¸²æŸ“ä¸å¼‚æ­¥æ‰¹é‡æ›´æ–°åŸç†è¯¦è§£\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-05-20T07:48:26.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Mrs.Zoe\\",\\"url\\":\\"https://mister-hope.com\\"}]}"]]},"headers":[{"level":2,"title":"1. ç»„ä»¶çš„æ¸²æŸ“æµç¨‹","slug":"_1-ç»„ä»¶çš„æ¸²æŸ“æµç¨‹","link":"#_1-ç»„ä»¶çš„æ¸²æŸ“æµç¨‹","children":[{"level":3,"title":"ğŸ§± åˆå§‹åŒ–æ¸²æŸ“æµç¨‹","slug":"ğŸ§±-åˆå§‹åŒ–æ¸²æŸ“æµç¨‹","link":"#ğŸ§±-åˆå§‹åŒ–æ¸²æŸ“æµç¨‹","children":[]},{"level":3,"title":"ğŸ–¼ï¸ æ¸²æŸ“ç®€å›¾ï¼š","slug":"ğŸ–¼ï¸-æ¸²æŸ“ç®€å›¾","link":"#ğŸ–¼ï¸-æ¸²æŸ“ç®€å›¾","children":[]}]},{"level":2,"title":"2. å¼‚æ­¥æ‰¹é‡æ›´æ–°æœºåˆ¶","slug":"_2-å¼‚æ­¥æ‰¹é‡æ›´æ–°æœºåˆ¶","link":"#_2-å¼‚æ­¥æ‰¹é‡æ›´æ–°æœºåˆ¶","children":[{"level":3,"title":"ğŸ“¦ ä¸ºä»€ä¹ˆéœ€è¦å¼‚æ­¥ï¼Ÿ","slug":"ğŸ“¦-ä¸ºä»€ä¹ˆéœ€è¦å¼‚æ­¥","link":"#ğŸ“¦-ä¸ºä»€ä¹ˆéœ€è¦å¼‚æ­¥","children":[]},{"level":3,"title":"ğŸ§ª å®ç°åŸç†ç®€è¿°","slug":"ğŸ§ª-å®ç°åŸç†ç®€è¿°","link":"#ğŸ§ª-å®ç°åŸç†ç®€è¿°","children":[]},{"level":3,"title":"ğŸ”‚ nextTick çš„ä½œç”¨ï¼Ÿ","slug":"ğŸ”‚-nexttick-çš„ä½œç”¨","link":"#ğŸ”‚-nexttick-çš„ä½œç”¨","children":[]}]},{"level":2,"title":"3. ç»„ä»¶æ›´æ–°æµç¨‹","slug":"_3-ç»„ä»¶æ›´æ–°æµç¨‹","link":"#_3-ç»„ä»¶æ›´æ–°æµç¨‹","children":[{"level":3,"title":"âœ¨ å±æ€§æ›´æ–°æˆ–å“åº”å¼æ•°æ®æ›´æ–°ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ","slug":"âœ¨-å±æ€§æ›´æ–°æˆ–å“åº”å¼æ•°æ®æ›´æ–°ä¼šå‘ç”Ÿä»€ä¹ˆ","link":"#âœ¨-å±æ€§æ›´æ–°æˆ–å“åº”å¼æ•°æ®æ›´æ–°ä¼šå‘ç”Ÿä»€ä¹ˆ","children":[]},{"level":3,"title":"ğŸ’¡ å“åº”å¼æ•°æ®æ›´æ–°æ—¶ï¼š","slug":"ğŸ’¡-å“åº”å¼æ•°æ®æ›´æ–°æ—¶","link":"#ğŸ’¡-å“åº”å¼æ•°æ®æ›´æ–°æ—¶","children":[]}]},{"level":2,"title":"ğŸ§  æ€»ç»“ï¼šVue 3 ç»„ä»¶æ›´æ–°å…¨é“¾è·¯","slug":"ğŸ§ -æ€»ç»“-vue-3-ç»„ä»¶æ›´æ–°å…¨é“¾è·¯","link":"#ğŸ§ -æ€»ç»“-vue-3-ç»„ä»¶æ›´æ–°å…¨é“¾è·¯","children":[]},{"level":2,"title":"âœ… å°ç»“","slug":"âœ…-å°ç»“","link":"#âœ…-å°ç»“","children":[]}],"git":{"createdTime":1745573689000,"updatedTime":1747727306000,"contributors":[{"name":"zy","username":"zy","email":"891374900@qq.com","commits":4,"url":"https://github.com/zy"},{"name":"zouyu","username":"zouyu","email":"891374900@qq.com","commits":1,"url":"https://github.com/zouyu"}]},"readingTime":{"minutes":3.45,"words":1036},"filePathRelative":"posts/vue/vue3/ç»„ä»¶æ›´æ–°.md","localizedDate":"2025å¹´4æœˆ25æ—¥","excerpt":"<hr>\\n<h1>ğŸŒŸ Vue 3 ç»„ä»¶çš„æ¸²æŸ“ä¸å¼‚æ­¥æ›´æ–°åŸç†è¯¦è§£</h1>\\n<p>Vue 3 åœ¨å®ç°ç»†èŠ‚ä¸Šæœ‰å¾ˆå¤šé‡æ„å’Œä¼˜åŒ–ï¼Œç‰¹åˆ«æ˜¯åœ¨ç»„ä»¶æ¸²æŸ“æµç¨‹å’Œå¼‚æ­¥æ›´æ–°æœºåˆ¶æ–¹é¢ã€‚æœ¬ç¯‡æ–‡æ¡£å°†å›´ç»•ä»¥ä¸‹ä¸‰ä¸ªéƒ¨åˆ†å±•å¼€æ·±å…¥è®²è§£ï¼š</p>\\n<ol>\\n<li><a href=\\"#1-%E7%BB%84%E4%BB%B6%E7%9A%84%E6%B8%B2%E6%9F%93%E6%B5%81%E7%A8%8B\\">Vue 3 ç»„ä»¶çš„æ¸²æŸ“æµç¨‹</a></li>\\n<li><a href=\\"#2-%E5%BC%82%E6%AD%A5%E6%9B%B4%E6%96%B0%E6%9C%BA%E5%88%B6\\">Vue 3 çš„å¼‚æ­¥æ›´æ–°åŸç†ï¼ˆnextTick &amp; æ›´æ–°é˜Ÿåˆ—ï¼‰</a></li>\\n<li><a href=\\"#3-%E7%BB%84%E4%BB%B6%E6%9B%B4%E6%96%B0%E6%B5%81%E7%A8%8B\\">ç»„ä»¶æ›´æ–°æµç¨‹ï¼ˆå±æ€§å˜æ›´ã€çŠ¶æ€å“åº”ï¼‰</a></li>\\n</ol>","autoDesc":true}');export{k as comp,r as data};
