import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,e,o as n}from"./app-DkVa7Hgi.js";const l={};function h(t,i){return n(),a("div",null,i[0]||(i[0]=[e(`<h1 id="packageservice" tabindex="-1"><a class="header-anchor" href="#packageservice"><span>PackageService</span></a></h1><p>è¿™ä¸ª <code>PackageService</code> æ˜¯æ•´ä¸ªæ’­æ”¾å™¨ï¼è¯¾å ‚ç³»ç»Ÿé‡Œ <strong>è´Ÿè´£è¯¾ä»¶èµ„æºï¼ˆpackageï¼‰ç®¡ç†ä¸ä¸‹è½½çš„æ ¸å¿ƒæœåŠ¡</strong>ã€‚<br> ç®€å•è¯´ï¼Œå®ƒç®¡çš„å°±æ˜¯ï¼š</p><blockquote><p><strong>è¯¾ä»¶åŒ…ï¼ˆpackageï¼‰æ€ä¹ˆåˆå§‹åŒ–ã€æ€ä¹ˆæ”¹ URLã€ä»€ä¹ˆåŒ…éœ€è¦ä¸‹è½½ã€æ€ä¹ˆè§¦å‘ä¸‹è½½ã€æ€ä¹ˆå¤„ç† Light Pageï¼ˆCOCOSï¼‰è¿è¡Œæ—¶ã€‚</strong></p></blockquote><p>ä¸‹é¢æˆ‘æ‹†å¼€è®²ï¼Œä¿è¯ä½ ä¸€çœ¼æ˜ç™½ã€‚</p><hr><h1 id="ğŸ§©-1-è¿™ä¸ªæœåŠ¡çš„æ ¸å¿ƒèŒè´£" tabindex="-1"><a class="header-anchor" href="#ğŸ§©-1-è¿™ä¸ªæœåŠ¡çš„æ ¸å¿ƒèŒè´£"><span>ğŸ§© 1. è¿™ä¸ªæœåŠ¡çš„æ ¸å¿ƒèŒè´£</span></a></h1><p><code>PackageService</code> åšä¸‰ä»¶äº‹ï¼š</p><h3 id="âœ…-1-åˆå§‹åŒ–-package-ä¿¡æ¯" tabindex="-1"><a class="header-anchor" href="#âœ…-1-åˆå§‹åŒ–-package-ä¿¡æ¯"><span>âœ… 1) åˆå§‹åŒ– package ä¿¡æ¯</span></a></h3><p>æ¥æ”¶æœåŠ¡å™¨ç»™çš„ package åˆ—è¡¨ï¼ŒæŠŠ URL ä¿®æ­£æˆå½“å‰å¹³å°å¯è®¿é—®çš„æ ¼å¼ã€‚</p><h3 id="âœ…-2-ä¸‹è½½æ‰€æœ‰-package" tabindex="-1"><a class="header-anchor" href="#âœ…-2-ä¸‹è½½æ‰€æœ‰-package"><span>âœ… 2) ä¸‹è½½æ‰€æœ‰ package</span></a></h3><p>è´Ÿè´£è®© Render ç«¯ï¼ˆé€šè¿‡ JsonRPCï¼‰å»çœŸæ­£ä¸‹è½½ ZIP / PKG æ–‡ä»¶ã€‚</p><h3 id="âœ…-3-ä¸‹è½½-light-page-cocos-è¿è¡Œæ—¶" tabindex="-1"><a class="header-anchor" href="#âœ…-3-ä¸‹è½½-light-page-cocos-è¿è¡Œæ—¶"><span>âœ… 3) ä¸‹è½½ Light Pageï¼ˆCOCOSï¼‰è¿è¡Œæ—¶</span></a></h3><p>å¦‚æœè¯¾ä»¶å†…å®¹é‡Œæœ‰ <code>SE-LP</code> ç±»å‹ï¼ˆLight Page è½»é‡é¡µï¼‰ï¼Œå°±è‡ªåŠ¨è¡¥ä¸‹ cocos runtime åŒ…ã€‚</p><hr><h1 id="ğŸ§©-2-é‡è¦æ–¹æ³•è§£æ" tabindex="-1"><a class="header-anchor" href="#ğŸ§©-2-é‡è¦æ–¹æ³•è§£æ"><span>ğŸ§© 2. é‡è¦æ–¹æ³•è§£æ</span></a></h1><h2 id="_1-init-packageinfo-traceid" tabindex="-1"><a class="header-anchor" href="#_1-init-packageinfo-traceid"><span>â‘  <code>init(packageInfo, traceID)</code></span></a></h2><p>åŠ è½½ package ä¿¡æ¯ï¼Œå¹¶æ ¹æ®å¹³å°ä¿®æ”¹ URLã€‚</p><div class="language-ts line-numbers-mode" data-highlighter="shiki" data-ext="ts" data-title="ts" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">init</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">packageInfo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">PackageInfo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[], </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">traceID</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">string</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">  logger</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">...</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> pkg</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> of</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> packageInfo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> url</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">isWeb</span><span style="--shiki-light:#0184BC;--shiki-dark:#C678DD;"> ?</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> pkg</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">url</span><span style="--shiki-light:#0184BC;--shiki-dark:#C678DD;"> :</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> \`render/</span><span style="--shiki-light:#CA1243;--shiki-dark:#C678DD;">\${</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">pkg</span><span style="--shiki-light:#50A14F;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">id</span><span style="--shiki-light:#CA1243;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/index.html\`</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">    pkg</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">url</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> url</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">packageInfo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">push</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">pkg</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ä½œç”¨" tabindex="-1"><a class="header-anchor" href="#ä½œç”¨"><span>ä½œç”¨ï¼š</span></a></h3><ul><li>Web ç«¯ï¼šä½¿ç”¨çœŸå® URL ä¸‹è½½ï¼ˆCDN / OSS çš„åœ°å€ï¼‰</li><li>Native ç«¯ï¼šç”¨æœ¬åœ°è·¯å¾„ï¼ˆå› ä¸ºåŒ…ä¼šè¢«ä¸‹è½½åˆ°æœ¬åœ°ï¼Œå› æ­¤ URL å¿…é¡»æ˜¯æœ¬åœ°è·¯å¾„ï¼‰</li></ul><h3 id="ä¾‹å­" tabindex="-1"><a class="header-anchor" href="#ä¾‹å­"><span>ä¾‹å­ï¼š</span></a></h3><h4 id="â—-web-å¹³å°" tabindex="-1"><a class="header-anchor" href="#â—-web-å¹³å°"><span>â— Web å¹³å°ï¼š</span></a></h4><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>https://cdn.xxx.com/package/physics-v2/index.html</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="â—-native-electron-å¹³å°" tabindex="-1"><a class="header-anchor" href="#â—-native-electron-å¹³å°"><span>â— Native / Electron å¹³å°ï¼š</span></a></h4><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>render/physics-v2/index.html</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>å…¶å®å°±æ˜¯è®© <strong>Web/Native ä¸¤ç«¯éƒ½èƒ½æ­£ç¡®è®¿é—® package å†…å®¹</strong>ã€‚</p><hr><h2 id="_2-downloadpackage-client-slides-traceid" tabindex="-1"><a class="header-anchor" href="#_2-downloadpackage-client-slides-traceid"><span>â‘¡ <code>downloadPackage(client, slides, traceID)</code></span></a></h2><p>ä¸‹è½½æ‰€æœ‰éœ€è¦çš„ packageã€‚</p><div class="language-ts line-numbers-mode" data-highlighter="shiki" data-ext="ts" data-title="ts" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> pkgPromise</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">packageInfo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">map</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(({ </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">down</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> }) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> down</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> &amp;&amp;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> updatePackage</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">client</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">))</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="ä½œç”¨-1" tabindex="-1"><a class="header-anchor" href="#ä½œç”¨-1"><span>ä½œç”¨ï¼š</span></a></h3><p>é€šè¿‡ <strong>render ç«¯ï¼ˆæ’­æ”¾å™¨æ¸²æŸ“è¿›ç¨‹ï¼‰</strong> å»ä¸‹è½½ packageã€‚</p><p><code>updatePackage(client, id)</code> â†’ å†…éƒ¨ä¼šæ‰§è¡Œï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>client.request(&quot;download&quot;, {</span></span>
<span class="line"><span>   id,</span></span>
<span class="line"><span>   version,</span></span>
<span class="line"><span>   url</span></span>
<span class="line"><span>})</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ğŸ“Œ ä¹Ÿå°±æ˜¯è¯´ <strong>PackageService æœ¬èº«ä¸ä¸‹è½½ï¼Œåªè´Ÿè´£å‘Šè¯‰ render ç«¯ä¸‹è½½</strong>ã€‚</p><hr><h3 id="ğŸ”¥-light-page-ç‰¹æ®Šé€»è¾‘-é‡ç‚¹" tabindex="-1"><a class="header-anchor" href="#ğŸ”¥-light-page-ç‰¹æ®Šé€»è¾‘-é‡ç‚¹"><span>ğŸ”¥ Light Page ç‰¹æ®Šé€»è¾‘ï¼ˆé‡ç‚¹ï¼‰</span></a></h3><div class="language-ts line-numbers-mode" data-highlighter="shiki" data-ext="ts" data-title="ts" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">slides</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">find</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">e</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> =&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">type</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> ===</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;SE-LP&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)) {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">  pkgPromise</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">push</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">async</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> () </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">      const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> id</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;cocos&#39;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">      const</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">version</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">url</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> } </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> await</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getLightPageRuntime</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">      await</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> client</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">request</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;download&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, { </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">packageInfo</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">version</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">url</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> }, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">unzipPath</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> })</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    })(),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  )</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ„æ€æ˜¯ï¼š</p><p><strong>å¦‚æœè¯¾ä»¶é‡ŒåŒ…å« Light Pageï¼ˆè½»é‡é¡µï¼‰ï¼Œå¿…é¡»ä¸‹è½½ cocos runtimeï¼ˆå¼•æ“ï¼‰æ‰èƒ½æ¸²æŸ“ã€‚</strong></p><p>ä¹Ÿå°±è§£é‡Šäº†ä½ ä¹‹å‰çœ‹åˆ°çš„ç±»ä¼¼æ–‡ä»¶ï¼š</p><ul><li><code>cocos2d-js-min-v24.js</code></li><li><code>physics-min.js</code></li></ul><p>è¿™äº›éƒ½æ˜¯ Light Page çš„è¿è¡Œæ—¶æ–‡ä»¶ã€‚</p><hr><h2 id="_3-getlightpageruntime" tabindex="-1"><a class="header-anchor" href="#_3-getlightpageruntime"><span>â‘¢ <code>getLightPageRuntime()</code></span></a></h2><p>ä» PKM è·å–æœ€æ–° cocos è¿è¡Œæ—¶ä¿¡æ¯ã€‚</p><div class="language-ts line-numbers-mode" data-highlighter="shiki" data-ext="ts" data-title="ts" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> pkmPath</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> \`/package/online/</span><span style="--shiki-light:#CA1243;--shiki-dark:#C678DD;">\${</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">id</span><span style="--shiki-light:#CA1243;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/tag/stable.json\`</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> pkgInfo</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> await</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> fetch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">AS_HUOHUA_PKM</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> pkmPath</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">json</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">url</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">version</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å®ƒåšçš„æ˜¯" tabindex="-1"><a class="header-anchor" href="#å®ƒåšçš„æ˜¯"><span>å®ƒåšçš„æ˜¯ï¼š</span></a></h3><p>ä» PKMï¼ˆpackage ç®¡ç†æœåŠ¡ï¼‰è¯·æ±‚ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>/package/online/light-page-runtime/tag/stable.json</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>å¾—åˆ°ï¼š</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  &quot;versions&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: [</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      &quot;url&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;https://xxx/cocos-runtime-v2.zip&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      &quot;version&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;2.3.1&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  ]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åæŠŠè¿™ä¸ª runtime ä¸‹è½½åˆ°æœ¬åœ°ã€‚</p><hr><h1 id="ğŸ§©-3-æ€»ç»“ä¸€å¥è¯" tabindex="-1"><a class="header-anchor" href="#ğŸ§©-3-æ€»ç»“ä¸€å¥è¯"><span>ğŸ§© 3. æ€»ç»“ä¸€å¥è¯</span></a></h1><p>è¿™ä¸ª <code>PackageService</code> çš„ä½œç”¨å°±æ˜¯ï¼š</p><blockquote><p><strong>è´Ÿè´£è¯¾ä»¶ package çš„åœ°å€ä¿®æ­£ã€åˆå§‹åŒ–ã€è§¦å‘ä¸‹è½½ï¼Œä»¥åŠæ£€æµ‹æ˜¯å¦éœ€è¦ä¸‹è½½ Cocos Light Page è¿è¡Œæ—¶ï¼ˆcocos2d-js / physics-min ç­‰æ–‡ä»¶ï¼‰ã€‚</strong></p></blockquote><p>æ•´ä½“æµç¨‹æ˜¯ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>[æœåŠ¡å™¨ä¸‹å‘ package åˆ—è¡¨]</span></span>
<span class="line"><span>      â†“</span></span>
<span class="line"><span>PackageService.init()</span></span>
<span class="line"><span>      â†“</span></span>
<span class="line"><span>ä¸‹è½½ package â†’ updatePackage()</span></span>
<span class="line"><span>      â†“</span></span>
<span class="line"><span>å¦‚æœè¯¾ä»¶é‡ŒåŒ…å« SE-LPï¼ˆè½»é‡é¡µï¼‰</span></span>
<span class="line"><span>      â†“</span></span>
<span class="line"><span>è¡¥å……ä¸‹è½½ cocos runtimeï¼ˆcocos2d-js-min-v24.js ç­‰ï¼‰</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h1 id="æƒ³ç»§ç»­æ·±å…¥å—" tabindex="-1"><a class="header-anchor" href="#æƒ³ç»§ç»­æ·±å…¥å—"><span>æƒ³ç»§ç»­æ·±å…¥å—ï¼Ÿ</span></a></h1><p>æˆ‘å¯ä»¥å¸®ä½ ï¼š</p><h3 id="âœ…-ç”»æ•´ä¸ª-packageservice-çš„æµç¨‹å›¾" tabindex="-1"><a class="header-anchor" href="#âœ…-ç”»æ•´ä¸ª-packageservice-çš„æµç¨‹å›¾"><span>âœ… ç”»æ•´ä¸ª PackageService çš„æµç¨‹å›¾</span></a></h3><h3 id="âœ…-ç”»-ui-â†”-player-â†”-render-â†”-packageservice-çš„æ•´ä½“æ¶æ„å›¾" tabindex="-1"><a class="header-anchor" href="#âœ…-ç”»-ui-â†”-player-â†”-render-â†”-packageservice-çš„æ•´ä½“æ¶æ„å›¾"><span>âœ… ç”» UI â†” Player â†” Render â†” PackageService çš„æ•´ä½“æ¶æ„å›¾</span></a></h3><h3 id="âœ…-é€šä¿—è§£é‡Šä»€ä¹ˆæ˜¯-se-lp-è½»é‡é¡µ" tabindex="-1"><a class="header-anchor" href="#âœ…-é€šä¿—è§£é‡Šä»€ä¹ˆæ˜¯-se-lp-è½»é‡é¡µ"><span>âœ… é€šä¿—è§£é‡Šä»€ä¹ˆæ˜¯ SE-LPï¼ˆè½»é‡é¡µï¼‰</span></a></h3><h3 id="âœ…-é€šä¿—è§£é‡Šä½ å‰é¢çœ‹åˆ°çš„æ‰€æœ‰-cocos-ç›¸å…³æ–‡ä»¶åˆ°åº•å¯¹åº”å“ªäº›æ¨¡å—" tabindex="-1"><a class="header-anchor" href="#âœ…-é€šä¿—è§£é‡Šä½ å‰é¢çœ‹åˆ°çš„æ‰€æœ‰-cocos-ç›¸å…³æ–‡ä»¶åˆ°åº•å¯¹åº”å“ªäº›æ¨¡å—"><span>âœ… é€šä¿—è§£é‡Šä½ å‰é¢çœ‹åˆ°çš„æ‰€æœ‰ cocos ç›¸å…³æ–‡ä»¶åˆ°åº•å¯¹åº”å“ªäº›æ¨¡å—</span></a></h3><p>ä½ æƒ³çœ‹å“ªä¸€ä¸ªï¼Ÿ</p>`,67)]))}const r=s(l,[["render",h]]),d=JSON.parse('{"path":"/posts/%E7%9F%A5%E8%AF%86%E9%9B%86%E9%94%A6/cocos%20%E5%B7%A5%E7%A8%8B%E6%9E%84%E5%BB%BA/player/PackageService.html","title":"PackageService","lang":"zh-CN","frontmatter":{"description":"PackageService è¿™ä¸ª PackageService æ˜¯æ•´ä¸ªæ’­æ”¾å™¨ï¼è¯¾å ‚ç³»ç»Ÿé‡Œ è´Ÿè´£è¯¾ä»¶èµ„æºï¼ˆpackageï¼‰ç®¡ç†ä¸ä¸‹è½½çš„æ ¸å¿ƒæœåŠ¡ã€‚ ç®€å•è¯´ï¼Œå®ƒç®¡çš„å°±æ˜¯ï¼š è¯¾ä»¶åŒ…ï¼ˆpackageï¼‰æ€ä¹ˆåˆå§‹åŒ–ã€æ€ä¹ˆæ”¹ URLã€ä»€ä¹ˆåŒ…éœ€è¦ä¸‹è½½ã€æ€ä¹ˆè§¦å‘ä¸‹è½½ã€æ€ä¹ˆå¤„ç† Light Pageï¼ˆCOCOSï¼‰è¿è¡Œæ—¶ã€‚ ä¸‹é¢æˆ‘æ‹†å¼€è®²ï¼Œä¿è¯ä½ ä¸€çœ¼æ˜ç™½ã€‚ ğŸ§© 1. è¿™ä¸ªæœ...","head":[["meta",{"property":"og:url","content":"https://mister-hope.github.io/zy-vuepress/posts/%E7%9F%A5%E8%AF%86%E9%9B%86%E9%94%A6/cocos%20%E5%B7%A5%E7%A8%8B%E6%9E%84%E5%BB%BA/player/PackageService.html"}],["meta",{"property":"og:site_name","content":"æˆ‘çš„åŸºåœ°"}],["meta",{"property":"og:title","content":"PackageService"}],["meta",{"property":"og:description","content":"PackageService è¿™ä¸ª PackageService æ˜¯æ•´ä¸ªæ’­æ”¾å™¨ï¼è¯¾å ‚ç³»ç»Ÿé‡Œ è´Ÿè´£è¯¾ä»¶èµ„æºï¼ˆpackageï¼‰ç®¡ç†ä¸ä¸‹è½½çš„æ ¸å¿ƒæœåŠ¡ã€‚ ç®€å•è¯´ï¼Œå®ƒç®¡çš„å°±æ˜¯ï¼š è¯¾ä»¶åŒ…ï¼ˆpackageï¼‰æ€ä¹ˆåˆå§‹åŒ–ã€æ€ä¹ˆæ”¹ URLã€ä»€ä¹ˆåŒ…éœ€è¦ä¸‹è½½ã€æ€ä¹ˆè§¦å‘ä¸‹è½½ã€æ€ä¹ˆå¤„ç† Light Pageï¼ˆCOCOSï¼‰è¿è¡Œæ—¶ã€‚ ä¸‹é¢æˆ‘æ‹†å¼€è®²ï¼Œä¿è¯ä½ ä¸€çœ¼æ˜ç™½ã€‚ ğŸ§© 1. è¿™ä¸ªæœ..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-11-25T09:19:17.000Z"}],["meta",{"property":"article:modified_time","content":"2025-11-25T09:19:17.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"PackageService\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-11-25T09:19:17.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Mrs.Zoe\\",\\"url\\":\\"https://mister-hope.com\\"}]}"]]},"headers":[{"level":3,"title":"âœ… 1) åˆå§‹åŒ– package ä¿¡æ¯","slug":"âœ…-1-åˆå§‹åŒ–-package-ä¿¡æ¯","link":"#âœ…-1-åˆå§‹åŒ–-package-ä¿¡æ¯","children":[]},{"level":3,"title":"âœ… 2) ä¸‹è½½æ‰€æœ‰ package","slug":"âœ…-2-ä¸‹è½½æ‰€æœ‰-package","link":"#âœ…-2-ä¸‹è½½æ‰€æœ‰-package","children":[]},{"level":3,"title":"âœ… 3) ä¸‹è½½ Light Pageï¼ˆCOCOSï¼‰è¿è¡Œæ—¶","slug":"âœ…-3-ä¸‹è½½-light-page-cocos-è¿è¡Œæ—¶","link":"#âœ…-3-ä¸‹è½½-light-page-cocos-è¿è¡Œæ—¶","children":[]},{"level":2,"title":"â‘  init(packageInfo, traceID)","slug":"_1-init-packageinfo-traceid","link":"#_1-init-packageinfo-traceid","children":[{"level":3,"title":"ä½œç”¨ï¼š","slug":"ä½œç”¨","link":"#ä½œç”¨","children":[]},{"level":3,"title":"ä¾‹å­ï¼š","slug":"ä¾‹å­","link":"#ä¾‹å­","children":[]}]},{"level":2,"title":"â‘¡ downloadPackage(client, slides, traceID)","slug":"_2-downloadpackage-client-slides-traceid","link":"#_2-downloadpackage-client-slides-traceid","children":[{"level":3,"title":"ä½œç”¨ï¼š","slug":"ä½œç”¨-1","link":"#ä½œç”¨-1","children":[]},{"level":3,"title":"ğŸ”¥ Light Page ç‰¹æ®Šé€»è¾‘ï¼ˆé‡ç‚¹ï¼‰","slug":"ğŸ”¥-light-page-ç‰¹æ®Šé€»è¾‘-é‡ç‚¹","link":"#ğŸ”¥-light-page-ç‰¹æ®Šé€»è¾‘-é‡ç‚¹","children":[]}]},{"level":2,"title":"â‘¢ getLightPageRuntime()","slug":"_3-getlightpageruntime","link":"#_3-getlightpageruntime","children":[{"level":3,"title":"å®ƒåšçš„æ˜¯ï¼š","slug":"å®ƒåšçš„æ˜¯","link":"#å®ƒåšçš„æ˜¯","children":[]},{"level":3,"title":"âœ… ç”»æ•´ä¸ª PackageService çš„æµç¨‹å›¾","slug":"âœ…-ç”»æ•´ä¸ª-packageservice-çš„æµç¨‹å›¾","link":"#âœ…-ç”»æ•´ä¸ª-packageservice-çš„æµç¨‹å›¾","children":[]},{"level":3,"title":"âœ… ç”» UI â†” Player â†” Render â†” PackageService çš„æ•´ä½“æ¶æ„å›¾","slug":"âœ…-ç”»-ui-â†”-player-â†”-render-â†”-packageservice-çš„æ•´ä½“æ¶æ„å›¾","link":"#âœ…-ç”»-ui-â†”-player-â†”-render-â†”-packageservice-çš„æ•´ä½“æ¶æ„å›¾","children":[]},{"level":3,"title":"âœ… é€šä¿—è§£é‡Šä»€ä¹ˆæ˜¯ SE-LPï¼ˆè½»é‡é¡µï¼‰","slug":"âœ…-é€šä¿—è§£é‡Šä»€ä¹ˆæ˜¯-se-lp-è½»é‡é¡µ","link":"#âœ…-é€šä¿—è§£é‡Šä»€ä¹ˆæ˜¯-se-lp-è½»é‡é¡µ","children":[]},{"level":3,"title":"âœ… é€šä¿—è§£é‡Šä½ å‰é¢çœ‹åˆ°çš„æ‰€æœ‰ cocos ç›¸å…³æ–‡ä»¶åˆ°åº•å¯¹åº”å“ªäº›æ¨¡å—","slug":"âœ…-é€šä¿—è§£é‡Šä½ å‰é¢çœ‹åˆ°çš„æ‰€æœ‰-cocos-ç›¸å…³æ–‡ä»¶åˆ°åº•å¯¹åº”å“ªäº›æ¨¡å—","link":"#âœ…-é€šä¿—è§£é‡Šä½ å‰é¢çœ‹åˆ°çš„æ‰€æœ‰-cocos-ç›¸å…³æ–‡ä»¶åˆ°åº•å¯¹åº”å“ªäº›æ¨¡å—","children":[]}]}],"git":{"createdTime":1764062357000,"updatedTime":1764062357000,"contributors":[{"name":"zouyu","username":"zouyu","email":"891374900@qq.com","commits":1,"url":"https://github.com/zouyu"}]},"readingTime":{"minutes":2.4,"words":719},"filePathRelative":"posts/çŸ¥è¯†é›†é”¦/cocos å·¥ç¨‹æ„å»º/player/PackageService.md","localizedDate":"2025å¹´11æœˆ25æ—¥","excerpt":"\\n<p>è¿™ä¸ª <code>PackageService</code> æ˜¯æ•´ä¸ªæ’­æ”¾å™¨ï¼è¯¾å ‚ç³»ç»Ÿé‡Œ <strong>è´Ÿè´£è¯¾ä»¶èµ„æºï¼ˆpackageï¼‰ç®¡ç†ä¸ä¸‹è½½çš„æ ¸å¿ƒæœåŠ¡</strong>ã€‚<br>\\nç®€å•è¯´ï¼Œå®ƒç®¡çš„å°±æ˜¯ï¼š</p>\\n<blockquote>\\n<p><strong>è¯¾ä»¶åŒ…ï¼ˆpackageï¼‰æ€ä¹ˆåˆå§‹åŒ–ã€æ€ä¹ˆæ”¹ URLã€ä»€ä¹ˆåŒ…éœ€è¦ä¸‹è½½ã€æ€ä¹ˆè§¦å‘ä¸‹è½½ã€æ€ä¹ˆå¤„ç† Light Pageï¼ˆCOCOSï¼‰è¿è¡Œæ—¶ã€‚</strong></p>\\n</blockquote>\\n<p>ä¸‹é¢æˆ‘æ‹†å¼€è®²ï¼Œä¿è¯ä½ ä¸€çœ¼æ˜ç™½ã€‚</p>\\n<hr>\\n<h1>ğŸ§© 1. è¿™ä¸ªæœåŠ¡çš„æ ¸å¿ƒèŒè´£</h1>\\n<p><code>PackageService</code> åšä¸‰ä»¶äº‹ï¼š</p>","autoDesc":true}');export{r as comp,d as data};
